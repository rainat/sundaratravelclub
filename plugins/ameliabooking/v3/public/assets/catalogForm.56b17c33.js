var Jt=Object.defineProperty;var Bt=Object.getOwnPropertySymbols;var Gt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable;var Ft=(g,y,_)=>y in g?Jt(g,y,{enumerable:!0,configurable:!0,writable:!0,value:_}):g[y]=_,je=(g,y)=>{for(var _ in y||(y={}))Gt.call(y,_)&&Ft(g,_,y[_]);if(Bt)for(var _ of Bt(y))Qt.call(y,_)&&Ft(g,_,y[_]);return g};import{o as a,c as i,n as B,d as wt,a as H,w as F,b as xe,t as n,u as e,_ as Ie,i as E,e as S,f as te,g as t,F as ae,r as _e,h as m,j as ge,k as C,l as Se,m as Le,p as nt,q as ot,s as He,v as Ue,x as Ke,I as Xt,y as at,z as St,A as be,B as pt,C as pe,D as Yt,E as bt,T as Me,G as ct,H as it,J as kt,K as rt,L as Te,M as _t,N as Z,O as Xe,P as ut,Q as Ce,R as Zt,S as Kt,U as ea,V as ta,W as aa,X as ia,Y as sa,Z as la,$ as na,a0 as oa,a1 as ca,a2 as ra,a3 as ua,a4 as da,a5 as ma,a6 as pa,a7 as _a,a8 as va,a9 as fa,aa as ga,ab as At,ac as ya,ad as ha,ae as dt,af as mt,ag as ba,ah as ka,ai as $a}from"./stepForm.e05178e0.js";const wa={name:"IconComponent"},Ct=Object.assign(wa,{props:{icon:{type:String,required:!0}},setup(g){return(y,_)=>(a(),i("span",{class:B(`am-icon-${g.icon}`)},null,2))}});const Ca={class:"am-cat__back-btn"},Sa={name:"MainHeader"},xt=Object.assign(Sa,{props:{btnString:{type:String,default:""},btnType:{type:String,default:"plain"},btnSize:{type:String,default:"mini"}},emits:["click"],setup(g,{emit:y}){const _=g;let h=wt({components:{IconComponent:Ct},template:'<IconComponent icon="arrow-left"></IconComponent>'});function k(){y("click")}return(o,s)=>(a(),i("div",Ca,[H(Ie,{prefix:e(h),category:"secondary",type:g.btnType,size:g.btnSize,onClick:k},{default:F(()=>[xe(n(e(_).btnString),1)]),_:1},8,["prefix","type","size"])]))}});const xa={class:"am-cat__sidemenu-item__wrapper"},Pa=["onClick"],Ea={key:0,class:"am-cat__sidemenu-footer"},Da={class:"am-cat__sidemenu-footer__text"},La=["href"],Ia={name:"SideMenu"},Ta=Object.assign(Ia,{props:{menuItems:{type:Array,required:!0},initSelection:{type:[String,Number]},identifier:{type:String,required:!0},nameIdentifier:{type:String,required:!0},footerString:{type:String,default:""},companyEmail:{type:String,default:""}},emits:["click"],setup(g,{emit:y}){const _=g;function h(s){y("click",s)}let k=E("amColors"),o=S(()=>({"--am-c-csm-text-op10":te(k.value.colorSbText,.1),"--am-c-csm-primary-op10":te(k.value.colorPrimary,.1),"--am-c-csm-text-op60":te(k.value.colorSbText,.6),"--am-c-csm-text-op80":te(k.value.colorSbText,.8)}));return(s,d)=>(a(),i("div",{class:"am-cat__sidemenu",style:ge(e(o))},[t("div",xa,[(a(!0),i(ae,null,_e(g.menuItems,(b,l)=>(a(),i("div",{key:l,class:B(["am-cat__sidemenu-item",{"am-active":e(_).initSelection===b[e(_).identifier]}]),onClick:()=>h(b)},n(b[e(_).nameIdentifier]),11,Pa))),128))]),e(_).companyEmail?(a(),i("div",Ea,[t("span",Da,n(e(_).footerString),1),t("a",{class:"am-cat__sidemenu-footer__email",href:`mailto:${e(_).companyEmail}`},n(e(_).companyEmail),9,La)])):m("",!0)],4))}});const Ba={name:"MainContent"},Pt=Object.assign(Ba,{props:{wrapperClass:{type:String,default:""},formClass:{type:String,default:""},headingClass:{type:String,default:""},contentClass:{type:String,default:""}},setup(g,{expose:y}){let _=C(null),h=C(0),k=C(null),o=C(0),s=C(null),d=C(0),b=C(null),l=C(null),p=C(0);window.addEventListener("resize",Q);function Q(){Se(()=>{_.value&&(h.value=_.value.offsetWidth),k.value&&(o.value=k.value.offsetWidth),s.value&&(d.value=s.value.offsetWidth)})}Le(()=>{Se(()=>{if(s.value&&b.value){let u=s.value.offsetHeight-b.value.offsetHeight-2;p.value=u<=656?656:u}Q()})}),y({catHeaderWidth:h,catFormWidth:d,catContainerWidth:o});let R=E("amColors"),V=S(()=>({"--am-h-cat-content":`${p.value}px`,"--am-c-scroll-op30":te(R.value.colorPrimary,.3),"--am-c-scroll-op10":te(R.value.colorPrimary,.1)}));return(u,A)=>(a(),i("div",{class:B(["am-cat__wrapper",g.wrapperClass])},[t("div",{ref_key:"catHeader",ref:_,class:"am-cat__header"},[nt(u.$slots,"header")],512),t("div",{ref_key:"catContainer",ref:k,class:"am-cat__main"},[nt(u.$slots,"side"),t("div",{ref_key:"catForm",ref:s,class:B(["am-cat__form",g.formClass]),style:ge(e(V))},[t("div",{ref_key:"catHeading",ref:b,class:B(["am-cat__heading",g.headingClass])},[nt(u.$slots,"heading")],2),t("div",{ref_key:"catContent",ref:l,class:B(["am-cat__content",g.contentClass])},[nt(u.$slots,"content")],2)],6)],512)],2))}}),Fa={name:"AmImagePlaceholder"},Ye=Object.assign(Fa,{props:{itemClass:{type:String,default:""},itemData:{type:Object,default:()=>{}},trimString:{type:Number,default:2}},setup(g){const y=g;function _(k){return k.pictureFullPath?{backgroundImage:`url(${k.pictureFullPath})`}:{backgroundColor:`${ot.value[Math.floor(Math.random()*ot.value.length)]}`}}function h(k){return k.pictureFullPath?"":("firstName"in k?`${k.firstName} ${k.lastName}`:k.name).split(" ").map(s=>s.charAt(0)).join("").toUpperCase().substring(0,y.trimString).replace(/[^\w\s]/g,"")}return(k,o)=>(a(),i("span",{class:B(e(y).itemClass),style:ge(je({},_(e(y).itemData)))},n(h(e(y).itemData)),7))}}),$t=He(window.wpAmeliaSettings),zt=He(window.wpAmeliaLabels);function st(g,y,_=null,h=null){let k=[];return g&&g.serviceList.forEach(o=>{_?_ in y.entitiesRelations&&o.id in y.entitiesRelations[_]&&(h?y.entitiesRelations[_][o.id].find(s=>s===h):!0)&&o.status==="visible"&&o.show&&!k.filter(s=>s===o.id).length&&k.push(o.id):y.employees.forEach(s=>{s.id in y.entitiesRelations&&o.id in y.entitiesRelations[s.id]&&(h?y.entitiesRelations[s.id][o.id].find(d=>d===h):!0)&&o.status==="visible"&&o.show&&!k.filter(d=>d===o.id).length&&k.push(o.id)})}),k}function Rt(g,y){let _=[],h=[];g.employees.forEach(s=>{if(s.id in g.entitiesRelations&&y in g.entitiesRelations[s.id]){let d=s.serviceList.find(b=>b.id===y);_.push(d.maxCapacity),h.push(d.minCapacity)}});let k=h.reduce((s,d)=>d<s?d:s,h[0]),o=_.reduce((s,d)=>d>s?d:s,_[0]);return k!==o?`${k}/${o}`:k}function Mt(g){let y=Math.floor(g/3600),_=g/60%60;return(y?y+zt.h+" ":"")+" "+(_?_+zt.min:"")}function Ze(g,y){let _=[];g.employees.forEach(o=>{if(o.id in g.entitiesRelations&&y in g.entitiesRelations[o.id]){let s=o.serviceList.find(d=>d.id===y);_.push(s.price)}});let h=_.reduce((o,s)=>s<o?s:o,_[0]),k=_.reduce((o,s)=>s>o?s:o,_[0]);return h!==k?{price:`${Ue(h,!$t.payments.hideCurrencySymbolFrontend)} - ${Ue(k,!$t.payments.hideCurrencySymbolFrontend)}`,min:h,max:k}:{price:Ue(h,$t.payments.hideCurrencySymbolFrontend),min:h,max:k}}function Ee(g,y){let _=[];return g.employees.forEach(h=>{h.id in g.entitiesRelations&&y in g.entitiesRelations[h.id]&&g.entitiesRelations[h.id][y].length&&g.locations.forEach(k=>{g.entitiesRelations[h.id][y].some(o=>o===k.id)&&!_.find(o=>o===k.id)&&_.push(k)})}),_}function Et(g,y){let _=[],h=Object.keys(g.entitiesRelations);return y.bookable.forEach(k=>{let o=[];h.forEach(s=>{g.entitiesRelations[s][k.service.id]&&!o.find(d=>d?d.id===parseInt(s):!0)&&o.push(g.employees.find(d=>d.id===parseInt(s)))}),o.length||_.push(!1)}),_.filter(k=>k===!1).length}function Dt(g,y,_){let h=[],k=Object.keys(g.entitiesRelations),o=C(_&&_.employee?g.unfilteredEmployees.filter(s=>s.id===parseInt(_.employee)):g.unfilteredEmployees);return y.bookable.forEach(s=>{let d=[];s.providers.length?s.providers.forEach(b=>{s.locations.length?s.locations.forEach(l=>{o.value.find(p=>p.id===b.id)&&g.entitiesRelations[b.id][s.service.id]&&g.entitiesRelations[b.id][s.service.id].indexOf(l.id)!==-1&&!d.find(p=>p.id===b.id)&&d.push(o.value.find(p=>p.id===b.id))}):o.value.find(l=>l.id===b.id)&&!d.find(l=>l.id===b.id)&&d.push(o.value.find(l=>l.id===b.id))}):k.forEach(b=>{s.locations.length?s.locations.forEach(l=>{g.entitiesRelations[b][s.service.id]&&g.entitiesRelations[b][s.service.id].indexOf(l.id)!==-1&&o.value.find(p=>p.id===parseInt(b))&&!d.find(p=>p.id===parseInt(b))&&d.push(o.value.find(p=>p.id===parseInt(b)))}):g.entitiesRelations[b][s.service.id]&&o.value.find(l=>l.id===parseInt(b))&&!d.find(l=>l.id===parseInt(b))&&d.push(o.value.find(l=>l.id===parseInt(b)))}),h.push(!!d.length)}),!h.filter(s=>s===!1).length}function Ot(g,y,_){let h=[],k=Object.keys(g.entitiesRelations),o=C(_&&_.employee?g.unfilteredEmployees.filter(s=>s.id===parseInt(_.employee)):g.unfilteredEmployees);return y.bookable.forEach(s=>{s.providers.length?s.providers.forEach(d=>{s.locations.length?s.locations.forEach(b=>{o.value.find(l=>l.id===d.id)&&g.entitiesRelations[d.id][s.service.id].indexOf(b.id)!==-1&&!h.find(l=>l.id===d.id)&&h.push(o.value.find(l=>l.id===d.id))}):o.value.find(b=>b.id===d.id)&&!h.find(b=>b.id===d.id)&&h.push(o.value.find(b=>b.id===d.id))}):k.forEach(d=>{s.locations.length?s.locations.forEach(b=>{g.entitiesRelations[d][s.service.id]&&g.entitiesRelations[d][s.service.id].indexOf(b.id)!==-1&&o.value.find(l=>l.id===parseInt(d))&&!h.find(l=>l.id===parseInt(d))&&h.push(o.value.find(l=>l.id===parseInt(d)))}):g.entitiesRelations[d][s.service.id]&&o.value.find(b=>b.id===parseInt(d))&&!h.find(b=>b.id===parseInt(d))&&h.push(o.value.find(b=>b.id===parseInt(d)))})}),h}function Qe(g,y,_){let h=[],k=Object.keys(g.entitiesRelations),o=C(_&&_.location?g.unfilteredLocations.filter(s=>s.id===parseInt(_.location)):g.unfilteredLocations);return y.bookable.forEach(s=>{s.locations.length?s.locations.forEach(d=>{o.value.find(b=>b.id===d.id)&&!h.find(b=>b.id===d.id)&&h.push(o.value.find(b=>b.id===d.id))}):k.forEach(d=>{o.value.forEach(b=>{d in g.entitiesRelations&&s.service.id in g.entitiesRelations[d]&&g.entitiesRelations[d][s.service.id].indexOf(b.id)!==-1&&o.value.find(l=>l.id===b.id)&&!h.find(l=>l.id===parseInt(b.id))&&h.push(o.value.find(l=>l.id===b.id))})})}),h}function za(g,y){let _=[];return g.categories.forEach(h=>{let k=st(h,g);h.packageList=[],g.packages.forEach(o=>{k.forEach(s=>{o.bookable.filter(d=>d.service.id===s).length&&!h.packageList.filter(d=>d===o.id).length&&o.available&&o.status==="visible"&&!Et(g,o)&&Dt(g,o,y)&&h.packageList.push(o.id)})}),h.status==="visible"&&h.serviceList.length&&!!k.length&&(y.show==="packages"?!!h.packageList.length:!0)&&_.push(h)}),_}const Aa={class:"am-fcl__item-inner"},Ra={class:"am-fcl__item-heading"},Ma={class:"am-fcl__item-name"},Oa={class:"am-fcl__item-segments"},Na={key:0,class:"am-fcl__item-segments__item"},Va=t("span",{class:"am-fcl__item-segments__item-icon am-icon-service"},null,-1),Ua={class:"am-fcl__item-segments__item-count"},Wa={key:1,class:"am-fcl__item-segments__item"},ja=t("span",{class:"am-fcl__item-segments__item-icon am-icon-shipment"},null,-1),Ha={class:"am-fcl__item-segments__item-count"},qa={class:"am-fcl__item-footer"},Ja=["src"],Ga={class:"am-empty__heading"},Qa={class:"am-empty__subheading"},Xa={class:"am-empty__text"},Ya={key:0},Za={href:"https://wpamelia.com/services-and-categories/"},Ka={key:1},ei={key:2,href:"https://wpamelia.com/employees/"},ti={name:"CategoriesList",key:"categoriesList"},ai=Object.assign(ti,{setup(g){const y=E("baseUrls");let _=C(null),h=C(0);window.addEventListener("resize",k);function k(){_.value&&(h.value=_.value.offsetWidth)}Le(()=>{_.value&&(h.value=_.value.offsetWidth)});let o=S(()=>h.value<=500?"am-w100":h.value<=600?"am-w50":h.value<=768?"am-w33":""),{nextPage:s}=E("changingPageFunctions",{nextPage:()=>{}});const d=E("settings");let b=Ke();const l=E("shortcodeData");let p=E("amEntities"),Q=E("customizedDataForm"),R=S(()=>Q.value.categoriesList.options),V=E("availableCategories"),u=S(()=>{let ie=[];return p.value.categories.forEach(X=>{let K=st(X,p.value);X.packageList=[],p.value.packages.forEach(ee=>{K.forEach(we=>{ee.bookable.filter(se=>se.service.id===we).length&&!X.packageList.filter(se=>se===ee.id).length&&ee.available&&ee.status==="visible"&&!Et(p.value,ee)&&Dt(p.value,ee,l.value)&&X.packageList.push(ee.id)})}),X.status==="visible"&&X.serviceList.length&&!!K.length&&(l.value.show==="packages"?!!X.packageList.length:!0)&&ie.push(X)}),Se(()=>{V.value=JSON.parse(JSON.stringify(ie))}),ie}),A=E("categorySelected");function v(ie){A.value=ie,b.commit("booking/setCategoryId",parseInt(ie)),at(b,{},"SelectCategory","appointment",null,null),s()}let q=S(()=>u.value.length===0);const $=E("labels"),de=E("localLanguage");let ve=S(()=>d.general.usedLanguages.includes(de.value)),w=S(()=>{let ie=He(je({},$));if(d.customizedData&&d.customizedData.cbf&&d.customizedData.cbf.categoriesList.translations){let X=d.customizedData.cbf.categoriesList.translations;Object.keys(X).forEach(K=>{X[K][de.value]&&ve.value?ie[K]=X[K][de.value]:X[K].default&&(ie[K]=X[K].default)})}return ie}),$e=E("amColors"),oe=S(()=>({"--am-c-fcl-card-text-op80":te($e.value.colorCardText,.8)}));return(ie,X)=>e(q)?(a(),i("div",{key:1,ref_key:"ameliaContainer",ref:_,class:"am-empty"},[t("img",{src:e(y).wpAmeliaPluginURL+"/v3/src/assets/img/am-empty-booking.svg"},null,8,Ja),t("div",Ga,n(e(w).oops),1),t("div",Qa,n(e(l).show!=="packages"?e(w).no_services_employees:e(w).no_package_services),1),t("div",Xa,[e(l).show!=="packages"?(a(),i("span",Ya,n(e(w).add_services_employees)+"\xA0 ",1)):m("",!0),t("a",Za,n(e(w).add_services_url)+"\xA0 ",1),e(l).show!=="packages"?(a(),i("span",Ka,n(e(w).and)+"\xA0 ",1)):m("",!0),e(l).show!=="packages"?(a(),i("a",ei,n(e(w).add_employees_url),1)):m("",!0)])],512)):(a(),i("div",{key:0,ref_key:"ameliaContainer",ref:_,class:"am-fcl",style:ge(e(oe))},[(a(!0),i(ae,null,_e(e(u),K=>(a(),i("div",{key:K.id,class:B(["am-fcl__item",e(o)])},[t("div",Aa,[t("div",{class:"am-fcl__item-content",style:ge(e(R).cardSideColor.visibility?{borderLeft:"7px solid",borderLeftColor:e(ot)[Math.floor(Math.random()*e(ot).length)]}:{})},[t("div",Ra,[t("div",Ma,n(K.name),1),t("div",Oa,[(!e(l).show||e(l).show==="services")&&e(R).services.visibility?(a(),i("div",Na,[Va,t("span",Ua,n(e(st)(K,e(p)).length),1)])):m("",!0),(!e(l).show||e(l).show==="packages")&&K.packageList.length&&e(R).packages.visibility?(a(),i("div",Wa,[ja,t("span",Ha,n(K.packageList.length),1)])):m("",!0)])]),t("div",qa,[H(Ie,{class:"am-fcl__item-btn",size:"mini",category:"secondary",type:e(R).cardButton.buttonType,suffix:e(Xt),onClick:ee=>v(K.id)},{default:F(()=>[xe(n(e(w).view_all),1)]),_:2},1032,["type","suffix","onClick"])])],4)])],2))),128))],4))}});const ii={class:"am-fcil__filter-buttons"},si={class:"am-fcil__filter"},li={class:"am-fcil__filter-item__btn-wrapper"},ni={class:"am-fcil__heading"},oi={key:0,class:"am-fcil__item-badge__wrapper"},ci={class:"am-fcil__item-badge am-package"},ri=t("span",{class:"am-icon-shipment"},null,-1),ui={class:"am-fcil__item-heading"},di={class:"am-fcil__item-name"},mi={key:0,class:"am-fcil__item-cost"},pi={key:0,class:"am-fcil__item-discount"},_i={class:"am-fcil__item-price"},vi={class:"am-fcil__item-info"},fi={key:0,class:"am-fcil__item-info__inner"},gi=t("span",{class:"am-icon-folder"},null,-1),yi={key:1,class:"am-fcil__item-info__inner"},hi=t("span",{class:"am-icon-clock"},null,-1),bi={key:0},ki={key:1},$i={key:2},wi={key:2,class:"am-fcil__item-info__inner"},Ci=t("span",{class:"am-icon-user"},null,-1),Si=t("span",null,"1/1",-1),xi=[Ci,Si],Pi={key:3,class:"am-fcil__item-info__inner"},Ei=t("span",{class:"am-icon-locations"},null,-1),Di={key:2,class:"am-fcil__item-services"},Li={key:0,class:"am-fcil__item-badge__wrapper"},Ii={class:"am-fcil__item-badge am-service"},Ti=t("span",{class:"am-icon-service"},null,-1),Bi={class:"am-fcil__item-heading"},Fi={class:"am-fcil__item-name"},zi={key:0,class:"am-fcil__item-cost"},Ai={key:0,class:"am-fcil__item-price"},Ri={class:"am-fcil__item-info"},Mi={key:0,class:"am-fcil__item-info__inner"},Oi=t("span",{class:"am-icon-folder"},null,-1),Ni={key:1,class:"am-fcil__item-info__inner"},Vi=t("span",{class:"am-icon-clock"},null,-1),Ui={key:2,class:"am-fcil__item-info__inner"},Wi=t("span",{class:"am-icon-user"},null,-1),ji={key:3,class:"am-fcil__item-info__inner"},Hi=t("span",{class:"am-icon-locations"},null,-1),qi={class:"am-fcil-employee__header"},Ji={class:"am-fcil-employee__heading"},Gi={class:"am-fcil-employee__heading-left"},Qi={class:"am-fcil-employee__name"},Xi={key:0,class:"am-fcil-employee__heading-right"},Yi={class:"am-fcil-employee__price"},Zi=["innerHTML"],Ki={key:1,ref:"ameliaContainer",class:"am-empty"},es=["src"],ts={class:"am-empty__heading"},as={class:"am-empty__subheading"},is={class:"am-empty__text"},ss={key:0},ls={href:"https://wpamelia.com/services-and-categories/"},ns={key:1},os={key:2,href:"https://wpamelia.com/employees/"},cs={name:"CategoryItemsList",key:"categoryItemsList"},rs=Object.assign(cs,{setup(g){let y=E("licence"),{nextPage:_,previousPage:h}=E("changingPageFunctions",{nextPage:()=>{},previousPage:()=>{}});const k=E("baseUrls");let o=C(!1),s=C(),d=E("containerWidth"),b=E("customizedDataForm"),l=S(()=>b.value.categoryItemsList.options);const p=E("shortcodeData");let Q=S(()=>{let N=s.value&&s.value.catContainerWidth?s.value.catContainerWidth>768:!0;return!p.value.category&&l.value.sidebar.visibility&&N});const R=E("settings");let V=Ke(),u=E("amEntities");const A=E("labels"),v=E("localLanguage");let q=S(()=>R.general.usedLanguages.includes(v.value)),$=S(()=>{let N=He(je({},A));if(R.customizedData&&R.customizedData.cbf&&R.customizedData.cbf.categoryItemsList.translations){let P=R.customizedData.cbf.categoryItemsList.translations;Object.keys(P).forEach(c=>{P[c][v.value]&&q.value?N[c]=P[c][v.value]:P[c].default&&(N[c]=P[c].default)})}return N}),de=C(""),ve=wt({components:{IconComponent:Ct},template:'<IconComponent icon="search"/>'}),w=C(!0),$e=wt({components:{IconComponent:Ct},template:'<IconComponent icon="filter"/>'}),oe=S(()=>s.value&&s.value.catHeaderWidth?s.value.catHeaderWidth:0);window.addEventListener("resize",ie);function ie(){Se(()=>{oe.value>480&&(w.value=!0)})}Le(()=>{ie()});function X(N){let P=[];return de.value.toLowerCase().split(" ").forEach(c=>{P.push(N.toLowerCase().includes(c))}),P.filter(c=>c===!1).length<=0}let K=E("availableCategories"),ee=E("categorySelected"),we=S(()=>st(u.value.categories.find(N=>N.id===ee.value),u.value,Pe.value,f.value)),se=S(()=>{let N=[];return u.value.packages.forEach(P=>{we.value.forEach(c=>{P.bookable.filter(re=>re.service.id===c).length&&!N.filter(re=>re.id===P.id).length&&P.available&&P.status==="visible"&&!Et(u.value,P)&&Dt(u.value,P,p.value)&&(de.value?X(P.name):!0)&&N.push(P)})}),N}),j=S(()=>{let N=[];return u.value.services.forEach(P=>{we.value.forEach(c=>{P.id===c&&(de.value?X(P.name):!0)&&N.push(P)})}),N}),Pe=C(null),f=C(null),ke=C(!0),W=C(!0);function ce(N){N==="all"&&(ke.value=!0,W.value=!0),N==="packages"&&(ke.value=!0,W.value=!1),N==="services"&&(ke.value=!1,W.value=!0)}St(()=>{p.value.show&&ce(p.value.show)});let M=S(()=>{let N=p.value.employee,P=u.value.employees.length,c=p.value.location,re=u.value.locations.length,De=l.value.searchInput.visibility,Ve=l.value.filterEmployee.visibility&&!N&&P>1&&!y.isLite,Re=l.value.filterLocation.visibility&&!c&&re>1&&!y.isLite,Fe=l.value.filterButtons.visibility&&p.value.show!=="packages"&&p.value.show!=="services"&&se.value.length!==0&&j.value.length!==0,ue={search:"am-w30",employee:"am-w20",location:"am-w20",buttons:"am-w30",category:"am-w100"};return oe.value>992?!De||!Fe?(ue.employee=!De&&!Fe?"am-w50":"am-w35",ue.location=!De&&!Fe?"am-w50":"am-w35",ue.search=!Fe&&!Re&&!Ve?"am-w100":"am-w30",Ve||(ue.location=!De&&!Fe?"am-w100":"am-w70"),Re||(ue.employee=!De&&!Fe?"am-w100":"am-w70")):(Ve||(ue.location="am-w40"),Re||(ue.employee="am-w40"),!Ve&&!Re&&(ue.search="am-w70")):oe.value>768||oe.value>480?(ue.search=Fe?"am-w50 am-tablet am-order1":"am-w100 am-tablet am-order1",ue.buttons=De?"am-w50 am-tablet am-order2":"am-w100 tablet am-order2",ue.employee=Re?"am-w50 am-tablet am-order3":"am-w100 am-tablet am-order3",ue.location=Ve?"am-w50 am-tablet am-order4":"am-w100 am-tablet am-order4",ue.category="am-w100 am-tablet am-order5"):(ue.employee="am-w100 am-mobile",ue.location="am-w100 am-mobile",ue.search="am-w100 am-mobile",ue.buttons="am-w100 am-mobile",ue.category="am-w100 am-mobile"),ue}),ne=S(()=>s.value&&s.value.catContainerWidth?s.value.catContainerWidth:0),ye=S(()=>{let N=j.value.length>1?$.value.heading_services:$.value.heading_service,P=se.value.length?se.value.length>1?$.value.packages:$.value.package:"";if(!j.value.length&&!se.value.length)return $.value.no_search_data;if(W.value&&(!ke.value||!se.value.length))return`${$.value.available} - ${j.value.length} ${N}`;if((!W.value||!j.value.length)&&ke.value)return`${$.value.available} - ${se.value.length} ${P}`;let c=se.value.length?"/":"";return`${$.value.available} - ${j.value.length} ${N} ${c} ${se.value.length} ${P}`});Le(()=>{Se(()=>{o.value=se.value.length===0&&j.value.length===0})});function We(N){ee.value=N.id,V.commit("booking/setCategoryId",parseInt(N.id))}let Oe=E("itemType");function J(N){V.commit("booking/setServiceId",parseInt(N)),V.commit("booking/setBookableType","appointment"),V.commit("booking/setSelectedExtras",[]),Oe.value="appointment",at(V,{},"SelectService","appointment",null,null),Se(()=>{_()})}function O(N){V.commit("booking/setPackageId",N.id),V.commit("booking/setBookableType","package"),V.commit("booking/setMultipleAppointments",_t(0,N)),V.commit("booking/setMultipleAppointmentsIndex",0),Oe.value="package",at(V,{},"SelectPackage","package",null,null),Se(()=>{_()})}function z(){ee.value=null,V.commit("booking/setCategoryId",null),h()}let G=C(!1),Ae=C(""),Ne=C([]),U=C({}),L=C(null);function x(){Ae.value="",Ne.value=[],U.value={},L.value=null}function T(N){Ne.value=Ot(u.value,N,p.value),U.value=N,G.value=!0}function vt(N){let P=[];Object.keys(u.value.entitiesRelations).forEach(re=>{re in u.value.entitiesRelations&&N in u.value.entitiesRelations[re]&&u.value.employees.find(De=>De.id===parseInt(re))&&P.push(u.value.employees.find(De=>De.id===parseInt(re)))}),Ne.value=P,Ae.value="service",G.value=!0,L.value=N}function et(N){let P=u.value.services.find(re=>re.id===L.value).price,c=N.serviceList.find(re=>re.id===L.value).price;return c!==P?`${c-P>0?"+":"-"} ${Ue(c-P)}`:0}function ft(){Ae.value==="service"?J(L.value):O(U.value),x()}function qe(N,P){let c="";return N>1?(P==="day"&&(c=$.value.expires_days),P==="week"&&(c=$.value.expires_weeks),P==="month"&&(c=$.value.expires_months)):(P==="day"&&(c=$.value.expires_day),P==="week"&&(c=$.value.expires_week),P==="month"&&(c=$.value.expires_month)),c}function lt(N,P){return Ee(N,P).length===1?Ee(N,P)[0].address?Ee(N,P)[0].address:Ee(N,P)[0].name:$.value.multiple_locations}let gt=E("amFonts",C({fontFamily:"Amelia Roboto, sans-serif",fontUrl:"",customFontFamily:"",fontFormat:"",customFontSelected:!1})),fe=E("amColors"),yt=S(()=>({"--am-c-fcil-text-op-10":te(fe.value.colorSbText,.1),"--am-c-fcil-main-text-op15":te(fe.value.colorMainText,.15),"--am-c-fcil-card-text-op15":te(fe.value.colorCardText,.15),"--am-c-fcil-card-text-op80":te(fe.value.colorCardText,.8),"--am-c-fcil-primary-op20":te(fe.value.colorPrimary,.2),"--am-c-fcil-success-op20":te(fe.value.colorSuccess,.2),"--am-c-fcil-filter-text-op10":te(fe.value.colorInpText,.1),"--am-w-fcil-main":!p.value.category&&l.value.sidebar.visibility&&Q.value?"calc(100% - 220px)":"100%","--am-w-fcil-card":s.value&&s.value.catFormWidth<580?"100%":"50%"})),tt=S(()=>({"--am-f-fcil-employee-f":gt.value.fontFamily,"--am-c-fcil-employee-bgr":fe.value.colorMainBgr,"--am-c-fcil-employee-heading":fe.value.colorMainHeadingText,"--am-c-fcil-employee-text":fe.value.colorMainText,"--am-c-fcil-employee-text-op80":te(fe.value.colorMainText,.8),"--am-c-fcil-employee-text-op15":te(fe.value.colorMainText,.15),"--am-c-fcil-employee-primary":fe.value.colorPrimary,"--am-c-fcil-employee-primary-op10":te(fe.value.colorPrimary,.1),"--am-c-inp-border":fe.value.colorInpBorder,"--am-c-main-text":fe.value.colorMainText}));return(N,P)=>e(o)?(a(),i("div",Ki,[t("img",{src:e(k).wpAmeliaPluginURL+"/v3/src/assets/img/am-empty-booking.svg"},null,8,es),t("div",ts,n(e($).oops),1),t("div",as,n(e(p).show!=="packages"?e($).no_services_employees:e($).no_package_services),1),t("div",is,[e(p).show!=="packages"?(a(),i("span",ss,n(e($).add_services_employees)+"\xA0 ",1)):m("",!0),t("a",ls,n(e($).add_services_url)+"\xA0 ",1),e(p).show!=="packages"?(a(),i("span",ns,n(e($).and)+"\xA0 ",1)):m("",!0),e(p).show!=="packages"?(a(),i("a",os,n(e($).add_employees_url),1)):m("",!0)])],512)):(a(),be(Pt,{key:0,ref_key:"contentRef",ref:s,"wrapper-class":`am-fcil ${e(d)<481?"am-mobile":""}`,"form-class":`am-fcil__main ${e(d)<481?"am-mobile":""}`,"content-class":`am-fcil__wrapper ${e(d)<481?"am-mobile":""}`,style:ge(e(yt))},pt({header:F(()=>[t("span",ii,[!e(p).category&&!e(p).categories_hidden?(a(),be(xt,{key:0,"btn-size":e(oe)<481?"medium":"mini","btn-string":e($).back_btn,"btn-type":e(l).backBtn.buttonType,onClick:z},null,8,["btn-size","btn-string","btn-type"])):m("",!0),e(oe)<481?(a(),be(Ie,{key:1,size:"medium",category:"secondary",type:e(l).filterMenuBtn.buttonType,"custom-class":"am-fcil__filter-buttons__menu","icon-only":!0,icon:e($e),onClick:P[0]||(P[0]=()=>pe(w)?w.value=!e(w):w=!e(w))},null,8,["type","icon"])):m("",!0)]),t("div",si,[e(l).searchInput.visibility?(a(),i("div",{key:0,class:B(["am-fcil__filter-item",e(M).search])},[H(Yt,{modelValue:e(de),"onUpdate:modelValue":P[1]||(P[1]=c=>pe(de)?de.value=c:de=c),placeholder:e($).filter_input,"icon-start":e(ve)},null,8,["modelValue","placeholder","icon-start"])],2)):m("",!0),H(Me,{name:"slide-fade"},{default:F(()=>[!e(p).employee&&e(u).employees.length>1&&e(l).filterEmployee.visibility&&e(w)&&!e(y).isLite?(a(),i("div",{key:0,class:B(["am-fcil__filter-item",e(M).employee])},[H(bt,{modelValue:e(Pe),"onUpdate:modelValue":P[2]||(P[2]=c=>pe(Pe)?Pe.value=c:Pe=c),clearable:"",filterable:"",placeholder:e($).filter_employee,"fit-input-width":!0},{default:F(()=>[(a(!0),i(ae,null,_e(e(u).employees,c=>(a(),be(kt,{key:c.id,value:c.id,label:`${c.firstName} ${c.lastName}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])],2)):m("",!0)]),_:1}),H(Me,{name:"slide-fade"},{default:F(()=>[!e(p).location&&e(u).locations.length>1&&e(l).filterLocation.visibility&&e(w)&&!e(y).isLite?(a(),i("div",{key:0,class:B(["am-fcil__filter-item",e(M).location])},[H(bt,{modelValue:e(f),"onUpdate:modelValue":P[3]||(P[3]=c=>pe(f)?f.value=c:f=c),clearable:"",filterable:"",placeholder:e($).filter_location,"fit-input-width":!0},{default:F(()=>[(a(!0),i(ae,null,_e(e(u).locations,c=>(a(),be(kt,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])],2)):m("",!0)]),_:1}),H(Me,{name:"slide-fade"},{default:F(()=>[!e(p).category&&e(l).sidebar.visibility&&!e(Q)&&e(w)?(a(),i("div",{key:0,class:B(["am-fcil__filter-item am-w100",e(M).category])},[H(bt,{modelValue:e(ee),"onUpdate:modelValue":P[4]||(P[4]=c=>pe(ee)?ee.value=c:ee=c),clearable:!1,filterable:!1,placeholder:"","fit-input-width":!0},{default:F(()=>[(a(!0),i(ae,null,_e(e(K),c=>(a(),be(kt,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])],2)):m("",!0)]),_:1}),!e(p).show&&e(l).filterButtons.visibility&&e(se).length!==0&&e(j).length!==0?(a(),i("div",{key:1,class:B(["am-fcil__filter-item",e(M).buttons])},[t("div",li,[t("div",{class:B(["am-fcil__filter-item__btn",{"am-active":e(ke)&&e(W)}]),onClick:P[5]||(P[5]=c=>ce("all"))},[t("span",null,n(e($).filter_all),1)],2),t("div",{class:B(["am-fcil__filter-item__btn",{"am-active":e(ke)&&!e(W)}]),onClick:P[6]||(P[6]=c=>ce("packages"))},[t("span",null,n(e($).filter_packages),1)],2),t("div",{class:B(["am-fcil__filter-item__btn",{"am-active":!e(ke)&&e(W)}]),onClick:P[7]||(P[7]=c=>ce("services"))},[t("span",null,n(e($).filter_services),1)],2)])],2)):m("",!0)])]),heading:F(()=>[t("div",ni,n(e(ye)),1)]),content:F(()=>[e(ke)?(a(!0),i(ae,{key:0},_e(e(se),c=>(a(),i("div",{key:c.id,class:B(["am-fcil__item",{"am-mobile":e(ne)<481}])},[t("div",{class:B(["am-fcil__item-inner",{"am-mobile":e(ne)<481}])},[e(l).packageBadge.visibility?(a(),i("div",oi,[t("div",ci,[ri,t("span",null,n(e($).package),1)])])):m("",!0),c.pictureFullPath?(a(),i("div",{key:1,class:"am-fcil__item-hero",style:ge({backgroundImage:`url(${c.pictureFullPath})`})},null,4)):m("",!0),t("div",ui,[t("div",di,n(c.name),1),e(l).packagePrice.visibility?(a(),i("div",mi,[c.discount?(a(),i("span",pi,n(`${e($).save} ${c.discount}%`),1)):m("",!0),t("span",_i,n(c.price?e(Ue)(c.calculatedPrice?c.price:c.price-c.price/100*c.discount):e($).free),1)])):m("",!0)]),t("div",vi,[e(l).packageCategory.visibility?(a(),i("div",fi,[gi,t("span",null,n(e(K).find(re=>re.id===e(ee)).name),1)])):m("",!0),e(l).packageDuration.visibility?(a(),i("div",yi,[hi,c.endDate?(a(),i("span",bi,n(`${e($).expires_at} ${c.endDate.split(" ")[0]}`),1)):c.durationCount?(a(),i("span",ki,n(`${e($).expires_after} ${c.durationCount} ${qe(c.durationCount,c.durationType)}`),1)):(a(),i("span",$i,n(e($).without_expiration),1))])):m("",!0),e(l).packageCapacity.visibility?(a(),i("div",wi,xi)):m("",!0),e(Qe)(e(u),c,e(p)).length&&e(l).packageLocation.visibility?(a(),i("div",Pi,[Ei,t("span",null,n(e(Qe)(e(u),c,e(p)).length===1?e(Qe)(e(u),c,e(p))[0].address?e(Qe)(e(u),c,e(p))[0].address:e(Qe)(e(u),c,e(p))[0].name:e($).multiple_locations),1)])):m("",!0)]),e(l).packageServices.visibility?(a(),i("div",Di,[t("span",null,n(`${e($).in_package}:`),1),(a(!0),i(ae,null,_e(c.bookable,re=>(a(),i("span",{key:re.id},n(re.service.name),1))),128))])):m("",!0),t("div",{class:B(["am-fcil__item-footer",[{"am-mobile":e(ne)<481},{"am-micro":e(ne)<320}]])},[e(l).cardEmployeeBtn.visibility?(a(),be(Ie,{key:0,class:B({"am-w100":e(ne)<320}),size:"small",type:e(l).cardEmployeeBtn.buttonType,onClick:re=>T(c)},{default:F(()=>[xe(n(e($).view_employees),1)]),_:2},1032,["class","type","onClick"])):m("",!0),H(Ie,{class:B([{"am-w100":!e(l).cardEmployeeBtn.visibility},{"am-micro am-w100":e(ne)<320}]),size:"small",type:e(l).cardContinueBtn.buttonType,onClick:re=>O(c)},{default:F(()=>[xe(n(e($).continue),1)]),_:2},1032,["class","type","onClick"])],2)],2)],2))),128)):m("",!0),e(W)?(a(!0),i(ae,{key:1},_e(e(j),c=>(a(),i("div",{key:c.id,class:B(["am-fcil__item",{"am-mobile":e(ne)<481}])},[t("div",{class:B(["am-fcil__item-inner",{"am-mobile":e(ne)<481}])},[e(l).serviceBadge.visibility?(a(),i("div",Li,[t("div",Ii,[Ti,t("span",null,n(e($).heading_service),1)])])):m("",!0),c.pictureFullPath?(a(),i("div",{key:1,class:"am-fcil__item-hero",style:ge({backgroundImage:`url(${c.pictureFullPath})`})},null,4)):m("",!0),t("div",Bi,[t("div",Fi,n(c.name),1),e(l).servicePrice.visibility?(a(),i("div",zi,[e(Ze)(e(u),c.id).min||e(Ze)(e(u),c.id).max?(a(),i("span",Ai,n(e(Ze)(e(u),c.id).price),1)):m("",!0)])):m("",!0)]),t("div",Ri,[e(l).serviceCategory.visibility?(a(),i("div",Mi,[Oi,t("span",null,n(e(K).find(re=>re.id===e(ee)).name),1)])):m("",!0),e(l).serviceDuration.visibility?(a(),i("div",Ni,[Vi,t("span",null,n(e(Mt)(c.duration)),1)])):m("",!0),e(l).serviceCapacity.visibility&&!e(y).isLite?(a(),i("div",Ui,[Wi,t("span",null,n(e(Rt)(e(u),c.id)),1)])):m("",!0),e(Ee)(e(u),c.id).length&&e(l).serviceLocation.visibility?(a(),i("div",ji,[Hi,t("span",null,n(lt(e(u),c.id)),1)])):m("",!0)]),t("div",{class:B(["am-fcil__item-footer",[{"am-mobile":e(ne)<481},{"am-micro":e(ne)<320}]])},[e(l).cardEmployeeBtn.visibility&&!e(y).isLite?(a(),be(Ie,{key:0,class:B({"am-w100":e(ne)<320}),size:"small",type:e(l).cardEmployeeBtn.buttonType,onClick:re=>vt(c.id)},{default:F(()=>[xe(n(e($).view_employees),1)]),_:2},1032,["class","type","onClick"])):m("",!0),H(Ie,{class:B([{"am-w100":!e(l).cardEmployeeBtn.visibility},{"am-micro am-w100":e(ne)<320}]),size:"small",type:e(l).cardContinueBtn.buttonType,onClick:re=>J(c.id)},{default:F(()=>[xe(n(e($).continue),1)]),_:2},1032,["class","type","onClick"])],2)],2)],2))),128)):m("",!0),H(it,{modelValue:e(G),"onUpdate:modelValue":P[9]||(P[9]=c=>pe(G)?G.value=c:G=c),"append-to-body":!0,"modal-class":"am-fcil-employee","destroy-on-close":!0,"lock-scroll":!0,"custom-styles":e(tt),width:"648px",onClose:x},{title:F(()=>[t("div",qi,n(e($).employee_info),1)]),default:F(()=>[t("div",null,[H(ct,null,{default:F(()=>[(a(!0),i(ae,null,_e(e(Ne),(c,re)=>(a(),be(rt,{key:re,side:""},{heading:F(()=>[t("div",Ji,[t("div",Gi,[H(Ye,{"item-class":"am-fcil-employee__img","item-data":c,"trim-string":2},null,8,["item-data"]),t("div",Qi,n(`${c.firstName} ${c.lastName}`),1)]),e(Ae)==="service"&&et(c)!==0?(a(),i("div",Xi,[t("div",Yi,n(et(c)),1)])):m("",!0)])]),default:F(()=>[e(Te)(c.description)?(a(),i("div",{key:0,class:B(["am-fcil-employee__text",{"ql-description":c.description.includes("<!-- Content -->")}]),innerHTML:c.description},null,10,Zi)):m("",!0)]),_:2},1024))),128))]),_:1})])]),footer:F(()=>[e(l).dialogEmployeeBtn.visibility?(a(),be(Ie,{key:0,type:e(l).dialogEmployeeBtn.buttonType,category:"primary",onClick:P[8]||(P[8]=c=>ft())},{default:F(()=>[xe(n(e(Ae)==="service"?e($).book_service:e($).book_package),1)]),_:1},8,["type"])):m("",!0)]),_:1},8,["modelValue","custom-styles"])]),_:2},[!e(p).category&&e(l).sidebar.visibility&&e(Q)?{name:"side",fn:F(()=>[H(Ta,{"menu-items":e(K),"init-selection":e(ee),identifier:"id","name-identifier":"name","footer-string":e($).get_in_touch,"company-email":e(R).company.email,onClick:We},null,8,["menu-items","init-selection","footer-string","company-email"])])}:void 0]),1032,["wrapper-class","form-class","content-class","style"]))}});const us=t("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),ds=t("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),ms=["href"],ps={class:"am-fs-sb__step-wrapper"},_s={class:"am-fs-sb__step-inner"},vs={class:"am-fs-sb__step-icon"},fs={key:0,class:"am-icon-check"},gs={key:0},ys={key:1},hs={key:1},bs={key:0,class:"am-fs-sb__step"},ks={class:"am-fs-sb__step-inner"},$s={class:"am-fs-sb__step-icon"},ws={key:0,class:"am-icon-check"},Cs={key:0,class:"am-fs-sb__support"},Ss=["href"],xs={key:1,class:"am-icon-phone"},Ps=["href"],Es={key:1,class:"am-icon-email"},Ds={key:0,class:"am-fs-sb__menu-text"},Ls={key:2,class:"am-no-services"},Is=["src"],Ts={href:"https://wpamelia.com/services-and-categories/"},Bs={style:{"font-size":"14px"}},Fs={href:"https://wpamelia.com/employees/"},zs={name:"CategoryBooking"},Nt=Object.assign(zs,{setup(g){let y=C(null),_=C();Z("containerWidth",_);let h=C(!1);window.addEventListener("resize",k);function k(){y.value&&(_.value=y.value.offsetWidth)}Le(()=>{Se(()=>{y.value&&(_.value=y.value.offsetWidth)}),at(v,{containerWidth:_},"ContainerWidth","appointment",null,null)});const o=E("settings"),s=o.customizedData?o.customizedData.sbsNew:Xe.sbsNew;s&&Z("amCustomize",s);let d=S(()=>{let r={heading:!0,phone:!0,email:!0};return"supportHeading"in s.sidebar.options&&(r.heading=s.sidebar.options.supportHeading.visibility),"companyPhone"in s.sidebar.options&&(r.phone=s.sidebar.options.companyPhone.visibility),"companyEmail"in s.sidebar.options&&(r.email=s.sidebar.options.companyEmail.visibility),r});const b=C(o.customizedData?o.customizedData.fonts:Xe.fonts);Z("amFonts",b);let l=C(!1),p=C(""),Q=E("bookingDialogWidth");ut(l,r=>{r?setTimeout(()=>{p.value="am-collapsed",setTimeout(()=>{Q.value="592px"},200)},1e3):(p.value="",Q.value="760px")}),Le(()=>{s.sidebar.options.self.visibility||(Q.value="520px")});let R=C(null),V=C(0);Le(()=>{setTimeout(()=>{Se(()=>{R.value&&setTimeout(()=>{V.value=R.value.offsetHeight},200)})},800)});let u=C(s.sidebar?s.sidebar.options.self.visibility:!0);const A=E("baseUrls"),v=Ke();let q=S(()=>({category:v.state.booking.appointment.categoryId?v.state.booking.appointment.categoryId:"",counter:v.state.entities.preselected.counter,employee:v.state.booking.appointment.providerId,hasApiCall:v.state.entities.preselected.hasApiCall,location:v.state.booking.appointment.locationId,service:v.state.booking.appointment.serviceId?v.state.booking.appointment.serviceId:"",package:v.state.booking.packageId,show:v.state.booking.appointment.type==="package"?"packages":"services",trigger:""}));v.commit("entities/setPreselected",q.value);let $=E("restoreFormData");const de=Ce(Zt),ve=Ce(Kt),w=Ce(ea),$e=Ce(ta),oe=Ce(aa),ie=Ce(ia),X=Ce(sa),K=Ce(la),ee=Ce(na),we=Ce(oa),se=Ce(ca),j=Ce(ra),Pe=Ce(ua),f=C([de,ie,we,ee]);Z("stepsArray",f);const ke=E("labels"),W=E("localLanguage");let ce=S(()=>o.general.usedLanguages.includes(W.value)),M=S(()=>{let r=He(je({},ke));return o.customizedData&&Object.keys(o.customizedData.sbsNew).forEach(D=>{if(D!=="colors"&&o.customizedData.sbsNew[D].translations){let I=o.customizedData.sbsNew[D].translations;Object.keys(I).forEach(Y=>{I[Y][W.value]&&ce.value?r[Y]=I[Y][W.value]:I[Y].default&&(r[Y]=I[Y].default)})}}),r});Z("amLabels",M);let ne=S(()=>{let r={};if(o.customizedData){let D=o.customizedData.sbsNew[f.value[T.value].key]?o.customizedData.sbsNew[f.value[T.value].key].translations:null;o.customizedData&&D&&Object.keys(D).forEach(I=>{D[I][W.value]&&ce.value?r[I]=D[I][W.value]:D[I].default&&(r[I]=D[I].default)})}return Object.keys(r).length?r:ke}),ye=S(()=>{let r="filled";return o.customizedData&&o.customizedData.sbsNew[f.value[T.value].key]&&(r=o.customizedData.sbsNew[f.value[T.value].key].options.primaryFooterButton.buttonType),r});Z("primFooterBtnType",ye),Z("primDescBtnType",ye);let We=S(()=>{let r="text";return o.customizedData&&o.customizedData.sbsNew[f.value[T.value].key]&&o.customizedData.sbsNew[f.value[T.value].key].options.secondaryFooterButton&&(r=o.customizedData.sbsNew[f.value[T.value].key].options.secondaryFooterButton.buttonType),r}),Oe=S(()=>da(v.getters["entities/getEmployeeServices"](v.getters["booking/getSelection"])));function J(){let r=v.getters["entities/getPreselected"];if(r.show==="packages")r.package&&(f.value.splice(0,1),le.value.splice(0,1),G()),ze();else{x();let D=v.getters["entities/filteredEmployees"](v.getters["booking/getSelection"]).length<=1,I=!s.initStep.options.employee.visibility,Y=v.getters["entities/filteredLocations"](v.getters["booking/getSelection"]).length<=1,me=!s.initStep.options.location.visibility;r.service&&(r.employee||D||I)&&(r.location||Y||me)&&(Oe.value.availability?(f.value.splice(0,1,Pe),le.value.splice(0,1)):(f.value.splice(0,1),le.value.splice(0,1)),ze())}}function O(r,D,I){r.value.map((me,Je)=>D.includes(me.name)?Je:null).filter(me=>me!==null).reverse().forEach(me=>{r.value.splice(me,1)}),I.forEach(me=>{r.value.indexOf(me)===-1&&(v.getters["entities/getPreselected"].show==="packages"&&v.getters["entities/getPreselected"].package?r.value.splice(T.value,0,me):r.value.splice(T.value+1,0,me))})}Z("goToPackageStep",{goToPackageStep:z}),Z("removePackageStep",{removePackageStep:Ae});function z(r){v.commit("booking/setPackageId",r.id),v.commit("booking/setBookableType","package"),v.commit("booking/setMultipleAppointments",_t(0,r)),v.commit("booking/setMultipleAppointmentsIndex",0);let D=r.bookable.reduce((me,Je)=>me+Je.maximumScheduled,0),I=[],Y=[];f.value[0]!==ve&&I.push("ExtrasStep"),f.value[0]!==ie&&I.push("DateTimeStep"),D>0?Y=Y.concat([K,X,w]):Y.push(w),O(f,I,Y),O(le,I,[]),ze(),qe()}function G(){let D=v.state.entities.packages.find(me=>me.id===v.getters["booking/getPackageId"]).bookable.reduce((me,Je)=>me+Je.maximumScheduled,0),I=[],Y=[];f.value.find(me=>me.name==="ExtrasStep")&&I.push("ExtrasStep"),f.value.find(me=>me.name==="DateTimeStep")&&I.push("DateTimeStep"),D>0?Y=Y.concat([K,X,w]):Y.push(w),O(f,I,Y),O(le,I,[]),ze(),qe()}function Ae(){let r=[];f.value[0]!==ie&&r.push(ie),f.value[0]!==ve&&L.value&&L.value.length&&r.push(ve),O(f,["PackageInfoStep","PackageAppointmentsStep","PackageAppointmentsListStep"],r),O(le,["PackageInfoStep","PackageAppointmentsStep","PackageAppointmentsListStep"],[]),ze()}Z("goToRecurringStep",{goToRecurringStep:Ne}),Z("removeRecurringStep",{removeRecurringStep:U});function Ne(){let r=0;for(let D=0;D<f.value.length;D++)if(f.value[D].name==="DateTimeStep"){r=D;break}f.value.splice(r+1,0,$e),f.value.splice(r+2,0,oe),ze(),qe()}function U(){for(let r=0;r<f.value.length;r++)f.value[r].name==="RecurringStep"||f.value[r].name;for(let r=f.value.length-1;r>=0;r--)(f.value[r].name==="RecurringStep"||f.value[r].name==="RecurringSummary")&&f.value.splice(r+1,1);ze()}let L=S(()=>{let r=v.getters["entities/getService"](v.getters["booking/getServiceId"]);return r?r.extras:[]});function x(){if(L.value.length&&!f.value.find(r=>r.name==="ExtrasStep")){let r=T.value;f.value.splice(r+1,0,ve),ze()}le.value.find(r=>r.name==="ExtrasStep")&&!Object.keys(L.value).length&&(f.value.splice(1,1),le.value.splice(1,1))}Z("initDataChanges",{changeInitStepDataService:x});const T=C(0);Z("stepIndex",T);let vt=E("stepName",C(""));ut(T,(r,D)=>{r<le.value.length&&(le.value[D].selected=!1,le.value[r].selected=!0),r===le.value.length&&(le.value[D].selected=!1),vt.value=f.value[r].name});let et=C(!1);Z("goBackToPackageBooking",et);function ft(){Re(!1),ue.value||(f.value[T.value].name===w.name&&(f.value.splice(T.value,1),le.value.splice(T.value,1)),f.value[T.value].name===$e.name&&(f.value.splice(T.value,2),le.value.splice(T.value,2)),f.value[T.value].name===K.name&&(et.value=!0),T.value=T.value-1),P.value=!P.value}function qe(){ue.value||(le.value[T.value].finished=!0,T.value=T.value+1)}let lt=S(()=>v.getters["entities/getReady"]),gt=S(()=>v.getters["booking/getLoading"]),fe=S(()=>v.getters["booking/getBooked"]),yt=S(()=>v.getters["booking/getPaymentGateway"]),tt=C(!1),N=C(!1),P=C(!1);function c(){tt.value=!0}function re(){tt.value=!1}function De(){P.value=!0}function Ve(){P.value=!1}function Re(r){N.value=r}function Fe(){fe.value&&(fe.value.customerCabinetUrl?window.location.href=fe.value.customerCabinetUrl:window.location.href=o.roles.customerCabinet.pageUrl)}Z("secondButton",{secondButtonClick:Fe});let ue=C(!1);Z("changingStepsFunctions",{nextStep:qe,previousStep:ft,footerButtonClick:c,footerButtonReset:re,footerBtnDisabledUpdater:Re,headerButtonPreviousClick:De,headerButtonPreviousReset:Ve,footerBtnDisabled:N,footerButtonClicked:tt,headerButtonPreviousClicked:P,navigateInsideStep:ue});const le=C([]);Z("sidebarSteps",le);function Lt(r){le.value[T.value].stepSelectedData.filter(D=>D.reference===r.reference).length?le.value[T.value].stepSelectedData.forEach((D,I,Y)=>{D.reference===r.reference&&r.value&&r.value!==D.value&&(D.value=r.value),D.reference===r.reference&&!r.value&&Y.splice(I,1)}):r.value&&le.value[T.value].stepSelectedData.push(r),le.value[T.value].stepSelectedData.sort((D,I)=>D.position-I.position)}function Vt(){f.value.forEach((r,D)=>{if(r.name!=="CongratulationsStep"){let I=r.sidebarData.label,Y={name:r.name,key:r.key,label:M.value[I],labelKey:I,icon:r.sidebarData.icon,stepSelectedData:[],finished:!1,selected:D===T.value};le.value.splice(D,0,Y)}})}St(()=>{Vt(),J()}),Le(()=>{if($.value){f.value.splice(0,f.value.length),le.value.splice(0,le.value.length),T.value=0,$.value.steps.forEach(D=>{switch(D){case"packageStep":f.value.push(j);break;case"bringingAnyone":f.value.push(Pe);break;case"initStep":f.value.push(de);break;case"packageInfoStep":f.value.push(w);break;case"packageAppointmentsStep":f.value.push(X);break;case"packageAppointmentsListStep":f.value.push(K);break;case"extrasStep":f.value.push(ve);break;case"dateTimeStep":f.value.push(ie);break;case"recurringStep":f.value.push($e);break;case"recurringSummary":f.value.push(oe);break;case"infoStep":f.value.push(we);break;case"paymentStep":f.value.push(se);break;case"congratulations":f.value.push(ee);break}let I=$.value.sidebar.find(Y=>Y.key===D);ze(),typeof I!="undefined"&&I.data&&I.data.forEach(Y=>{Lt({reference:Y.reference,position:Y.position,value:Y.value})}),T.value++}),v.commit("booking/setLoading",!1);let r=-1;$.value.result==="success"?r=f.value.length-1:($.value.result==="error"||$.value.result==="canceled")&&(r=f.value.length-2);for(let D=0;D<=r;D++)f.value[D].finished=!0;for(let D=0;D<=r-1;D++)le.value[D].finished=!0,le.value[D].selected=!1;($.value.result==="error"||$.value.result==="canceled")&&(le.value[r].finished=!1,le.value[r].selected=!0),T.value=r}});function ze(){f.value.forEach((r,D)=>{if(r.name!=="CongratulationsStep"&&!le.value.find(I=>I.labelKey===r.sidebarData.label)){let I=r.sidebarData.label,Y={name:r.name,key:r.key,label:M.value[I],labelKey:I,icon:r.sidebarData.icon,stepSelectedData:[],finished:!1,selected:D===T.value};le.value.splice(D,0,Y)}})}Z("sidebarStepsFunctions",{sidebarDataCollector:Lt}),Z("addPaymentsStep",{addPaymentsStep:It}),Z("removePaymentsStep",{removePaymentsStep:Tt});function It(){f.value.splice(f.value.length-1,0,se),ze()}function Tt(){let r=["PaymentStep"];O(f,r,[]),O(le,r,[])}function Ut(){if(v.getters["entities/getPreselected"].show==="packages"){let D=v.getters["booking/getPackageId"]?[v.getters["entities/getPackage"](v.getters["booking/getPackageId"])]:v.getters["entities/getPackages"];return D.length>0&&D.filter(I=>I.price>0).length===D.length}if(!v.getters["booking/getPackageId"]){let D=v.getters["booking/getServiceId"]?[v.getters["entities/getService"](v.getters["booking/getServiceId"])]:v.getters["entities/getServices"],I=0;for(let Y of D){let me=v.getters["booking/getEmployeeId"]?v.getters["entities/getEmployee"](v.getters["booking/getEmployeeId"])?[v.getters["entities/getEmployee"](v.getters["booking/getEmployeeId"])]:[]:v.getters["entities/getEmployees"];if(me.filter(Ge=>Ge.serviceList.find(Be=>Be.id===Y.id&&(Be.price>0||Be.customPricing&&Be.customPricing.enabled&&(Object.values(Be.customPricing.durations).length===Object.values(Be.customPricing.durations).filter(ht=>ht.price>0).length||v.getters["booking/getDuration"]&&Be.customPricing.durations[v.getters["booking/getDuration"]].price>0)))).length===me.filter(Ge=>Ge.serviceList.find(Be=>Be.id===Y.id)).length)I++;else{let Ge=v.getters["booking/getSelectedExtras"].length?v.getters["booking/getSelectedExtras"]:[];Ge.length>0&&Ge.reduce((Be,ht)=>Be+ht.price,0)>0&&I++}}return D.length>0&&I===D.length}return v.getters["entities/getPackage"](v.getters["booking/getPackageId"]).price>0}let Wt=S(()=>Ut());ma(()=>{!$.value&&!Wt.value?Tt():$.value||f.value.indexOf(se)===-1&&It()},{flush:"post"});let he=S(()=>o.customizedData?o.customizedData.sbsNew.colors:Xe.sbsNew.colors);Z("amColors",he);let jt=S(()=>({"--am-c-primary":he.value.colorPrimary,"--am-c-success":he.value.colorSuccess,"--am-c-error":he.value.colorError,"--am-c-warning":he.value.colorWarning,"--am-c-main-bgr":he.value.colorMainBgr,"--am-c-main-heading-text":he.value.colorMainHeadingText,"--am-c-main-text":he.value.colorMainText,"--am-c-sb-bgr":he.value.colorSbBgr,"--am-c-sb-text":he.value.colorSbText,"--am-c-inp-bgr":he.value.colorInpBgr,"--am-c-inp-border":he.value.colorInpBorder,"--am-c-inp-text":he.value.colorInpText,"--am-c-inp-placeholder":he.value.colorInpPlaceHolder,"--am-c-drop-bgr":he.value.colorDropBgr,"--am-c-drop-text":he.value.colorDropText,"--am-c-btn-prim":he.value.colorBtnPrim,"--am-c-btn-prim-text":he.value.colorBtnPrimText,"--am-c-btn-sec":he.value.colorBtnSec,"--am-c-btn-sec-text":he.value.colorBtnSecText,"--am-c-skeleton-op20":te(he.value.colorMainText,.2),"--am-c-skeleton-op60":te(he.value.colorMainText,.6),"--am-font-family":b.value.fontFamily,"--am-mw-main":u.value?l.value?"592px":"760px":"520px","--am-brad-main":u.value?"0 0.5rem 0.5rem 0":"0.5rem"}));function Ht(){let r=document.head||document.getElementsByTagName("head")[0];r.querySelector("#amCustomFont")&&r.querySelector("#amCustomFont").remove();let D=`@font-face {font-family: '${b.value.fontFamily}'; src: url(${b.value.fontUrl});}`,I=document.createElement("style");r.appendChild(I),I.setAttribute("type","text/css"),I.setAttribute("id","amCustomFont"),I.appendChild(document.createTextNode(D))}b.value.customFontSelected&&Ht();let qt=S(()=>({colorInputBorderRadius:"6px"}));return Z("amDesignProperties",qt),Le(()=>{pa("renderForm",{ameliaContainer:y,containerWidth:_,empty:h,amCustomize:s,amFonts:b,sidebarCollapsed:l,sidebarCollapseItemsClass:p,sidebarFooterRef:R,sidebarFooterHeight:V,sidebarVisibility:u})}),(r,D)=>(a(),i(ae,null,[b.value.customFontSelected?m("",!0):(a(),i(ae,{key:0},[us,ds,t("link",{rel:"stylesheet",type:"text/css",href:`${e(A).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,ms)],64)),e(h)?(a(),i("div",Ls,[t("img",{src:e(A).wpAmeliaPluginURL+"/v3/src/assets/img/am-empty-booking.svg",style:{"margin-top":"10px"}},null,8,Is),t("h1",null,n(e(M).oops),1),t("h3",null,n(e(M).no_services_employees),1),t("p",null,n(e(M).add_services_employees),1),t("a",Ts,n(e(M).add_services_url)+"\xA0 ",1),t("span",Bs,n(e(M).and)+"\xA0",1),t("a",Fs,n(e(M).add_employees_url),1)])):(a(),i("div",{key:1,id:"amelia-container",ref_key:"ameliaContainer",ref:y,class:B(["am-fs__wrapper",{"am-collapsed":e(l)}]),style:ge(e(jt))},[e(_)>560&&e(u)?(a(),be(fa,{key:0,class:B(["am-fs-sb",{"am-collapsed":e(l)}]),style:ge({width:e(l)?"72px":"240px",paddingBottom:`${e(V)+16}px`})},{"step-list":F(()=>[t("div",ps,[f.value[T.value]!==e(ee)||!e(o).general.addToCalendar||e(fe)&&e(fe).data.length===0?(a(!0),i(ae,{key:0},_e(le.value,I=>(a(),i("div",{key:I.key,class:"am-fs-sb__step"},[t("div",_s,[t("div",vs,[t("span",{class:B(`am-icon-${I.icon}`)},null,2)]),H(Me,{name:"fade"},{default:F(()=>[e(l)?m("",!0):(a(),i("p",{key:0,class:B(["am-fs-sb__step-heading",e(p)])},n(I.label),3))]),_:2},1024),t("div",{class:B(["am-fs-sb__step-checker",[{"am-fs-sb__step-checker-selected":I.selected},e(p)]])},[H(Me,{name:"fade"},{default:F(()=>[I.finished?(a(),i("span",fs)):m("",!0)]),_:2},1024)],2)]),H(_a,{tag:"span",name:"fade",appear:"",class:B(["am-fs-sb__step-selection__wrapper",{"am-fs-sb__step-selection-packages":I.key===e(X).key&&I.stepSelectedData.length>3}])},{default:F(()=>[e(l)?m("",!0):(a(!0),i(ae,{key:0},_e(I.stepSelectedData,(Y,me)=>(a(),i("p",{key:Y.position,class:"am-fs-sb__step-selection"},[I.key!==e(X).key||me<3?(a(),i("span",gs,n(Y.value),1)):(a(),i("span",ys,n(e(M).plus_more),1))]))),128))]),_:2},1032,["class"])]))),128)):(a(),i("div",hs,[H(Me,{name:"fade"},{default:F(()=>[e(l)?m("",!0):(a(),be(va,{key:0}))]),_:1}),e(l)?(a(),i("div",bs,[t("div",ks,[t("div",$s,[t("span",{class:B(`am-icon-${f.value[T.value].sidebarData.icon}`)},null,2)]),t("div",{class:B(["am-fs-sb__step-checker",[{"am-fs-sb__step-checker-selected":f.value[T.value].sidebarData.selected},e(p)]])},[H(Me,{name:"fade"},{default:F(()=>[f.value[T.value].sidebarData.finished?(a(),i("span",ws)):m("",!0)]),_:1})],2)])])):m("",!0)]))])]),"support-info":F(()=>[t("div",{ref_key:"sidebarFooterRef",ref:R,class:"am-fs-sb__footer"},[(e(o).company.email||e(o).company.phone)&&(e(d).heading||e(d).phone||e(d).email)?(a(),i("div",Cs,[H(Me,{name:"fade"},{default:F(()=>[!e(l)&&e(d).heading?(a(),i("div",{key:0,class:B(["am-fs-sb__support-heading",e(p)])},n(e(M).get_in_touch),3)):m("",!0)]),_:1}),e(o).company.phone&&e(d).phone?(a(),i("a",{key:0,class:"am-fs-sb__support-email",href:`tel:${e(o).company.phone}`},[e(l)?(a(),i("span",xs)):(a(),i(ae,{key:0},[xe(n(e(o).company.phone),1)],64))],8,Ss)):m("",!0),e(o).company.email&&e(d).email?(a(),i("a",{key:1,class:"am-fs-sb__support-email",href:`mailto:${e(o).company.email}`},[e(l)?(a(),i("span",Es)):(a(),i(ae,{key:0},[xe(n(e(o).company.email),1)],64))],8,Ps)):m("",!0)])):m("",!0),t("div",{class:B(["am-fs-sb__menu",e(p)]),onClick:D[0]||(D[0]=I=>pe(l)?l.value=!e(l):l=!e(l))},[H(Me,{name:"fade"},{default:F(()=>[e(l)?m("",!0):(a(),i("span",Ds,n(e(M).collapse_menu),1))]),_:1}),t("span",{class:B(`am-icon-arrow-circle-${e(l)?"left":"right"}`)},null,2)],2)],512)]),_:1},8,["class","style"])):m("",!0),H(ha,null,pt({step:F(()=>[(a(),be(At(f.value[T.value]),{"global-class":"am-fs__main-content"}))]),footer:F(()=>[H(e(ya),{"second-button-show":f.value[T.value]===e(ee)&&e(o).roles.customerCabinet.enabled&&e(o).roles.customerCabinet.pageUrl!==null,booked:e(fe),loading:e(gt),ready:e(lt),"payment-gateway":e(yt),"customized-labels":e(ne),"primary-footer-button-type":e(ye),"secondary-footer-button-type":e(We)},null,8,["second-button-show","booked","loading","ready","payment-gateway","customized-labels","primary-footer-button-type","secondary-footer-button-type"])]),_:2},[f.value[T.value]!==e(ee)?{name:"header",fn:F(()=>[H(ga,{"sidebar-visible":e(u),ready:e(lt)},null,8,["sidebar-visible","ready"])])}:void 0]),1024)],6))],64))}});const As={class:"am-fcis__header-text"},Rs={class:"am-fcis__header-name"},Ms={key:0,class:"am-fcis__badge am-service"},Os=t("span",{class:"am-icon-service"},null,-1),Ns={class:"am-fcis__header-action"},Vs={key:0,class:"am-fcis__header-price"},Us={class:"am-fcis__header-btn"},Ws={key:0,class:"am-fcis__header-bottom"},js={class:"am-fcis__mini-info"},Hs={key:0,class:"am-fcis__mini-info__inner"},qs=t("span",{class:"am-icon-folder"},null,-1),Js={key:1,class:"am-fcis__mini-info__inner"},Gs=t("span",{class:"am-icon-clock"},null,-1),Qs={key:2,class:"am-fcis__mini-info__inner"},Xs=t("span",{class:"am-icon-user"},null,-1),Ys={key:3,class:"am-fcis__mini-info__inner"},Zs=t("span",{class:"am-icon-locations"},null,-1),Ks={key:0,class:"am-fcis__gallery"},el={key:0,class:"am-fcis__gallery-thumb__wrapper"},tl={class:"am-gd__display-wrapper"},al={class:"am-gd__arrows",style:{display:"flex","justify-content":"space-between"}},il=["src","alt"],sl={class:"am-gd__selection"},ll={class:"am-gd__thumb-wrapper"},nl=["onClick"],ol={key:1,class:"am-fcis__info"},cl={class:"am-fcis__info-tab__wrapper"},rl={class:"am-fcis__info-content__wrapper"},ul={key:0,class:"am-fcis__info-content"},dl=["innerHTML"],ml={key:1,class:"am-fcis__info-content"},pl={class:"am-fcis__info-employee__hero"},_l={class:"am-fcis__info-employee__heading"},vl={class:"am-fcis__info-employee__name"},fl={key:0,class:"am-fcis__info-employee__price"},gl=["innerHTML"],yl={key:2,class:"am-fcis__include-wrapper"},hl={class:"am-fcis__include-heading"},bl={class:"am-fcis__include-heading__text"},kl=["onClick"],$l={class:"am-fcis__include-hero"},wl={key:0,class:"am-fcis__include-cost"},Cl={key:0,class:"am-fcis__include-discount"},Sl={class:"am-fcis__include-price"},xl={class:"am-fcis__include-info"},Pl={key:0,class:"am-fcis__include-info__inner"},El=t("span",{class:"am-icon-folder"},null,-1),Dl={key:1,class:"am-fcis__include-info__inner"},Ll=t("span",{class:"am-icon-clock"},null,-1),Il={key:0},Tl={key:1},Bl={key:2},Fl={key:2,class:"am-fcis__include-info__inner"},zl=t("span",{class:"am-icon-user"},null,-1),Al=t("span",null,"1/1",-1),Rl=[zl,Al],Ml={key:3,class:"am-fcis__include-info__inner"},Ol=t("span",{class:"am-icon-locations"},null,-1),Nl={key:4,class:"am-fcis__include-info__inner am-fcis__include-info__services"},Vl={key:1,ref:"ameliaContainer",class:"am-empty"},Ul=["src"],Wl={class:"am-empty__heading"},jl={class:"am-empty__subheading"},Hl={class:"am-empty__text"},ql={key:0},Jl={href:"https://wpamelia.com/services-and-categories/"},Gl={key:1},Ql={key:2,href:"https://wpamelia.com/employees/"},Xl={name:"CategoryService"},Yl=Object.assign(Xl,{setup(g){let y=E("licence"),{previousPage:_}=E("changingPageFunctions",{previousPage:()=>{}}),h=S(()=>u.getters["entities/getReady"]);const k=E("baseUrls");let o=C(),s=E("containerWidth");const d=E("settings");let b=E("amFonts");const l=E("labels"),p=E("localLanguage");let Q=S(()=>d.general.usedLanguages.includes(p.value)),R=S(()=>{let U=He(je({},l));if(d.customizedData&&d.customizedData.cbf&&d.customizedData.cbf.categoryService.translations){let L=d.customizedData.cbf.categoryService.translations;Object.keys(L).forEach(x=>{L[x][p.value]&&Q.value?U[x]=L[x][p.value]:L[x].default&&(U[x]=L[x].default)})}return U}),V=C(0),u=Ke(),A=E("amEntities"),v=E("customizedDataForm"),q=S(()=>v.value.categoryService.options),$=E("itemType"),de=E("categorySelected"),ve=S(()=>A.value.categories.find(U=>U.id===de.value)),w=S(()=>{let U=A.value.services.find(L=>L.id===u.getters["booking/getServiceId"]);return U||{}});console.log(w.value);function $e(U,L){return Ee(U,L).length===1?Ee(U,L)[0].address?Ee(U,L)[0].address:Ee(U,L)[0].name:R.value.multiple_locations}let oe=C("description"),ie=S(()=>{let U=[];return Object.keys(A.value.entitiesRelations).forEach(x=>{A.value.entitiesRelations[x][w.value.id]&&A.value.employees.find(T=>T.id===parseInt(x))&&U.push(A.value.employees.find(T=>T.id===parseInt(x)))}),U});function X(U){let L=U.serviceList.find(x=>x.id===w.value.id).price;return L-w.value.price!==0?`${L-w.value.price>0?"+":"-"} ${Ue(L-w.value.price)}`:""}Le(()=>{q.value.serviceDescription.visibility||(oe.value="employees"),Te(w.value.description)||(oe.value="employees")});let K=S(()=>{let U=w.value.gallery.length?JSON.parse(JSON.stringify(w.value.gallery)):[];return w.value.gallery.length===1?[]:(U.shift(),U.length>2&&U.splice(2,U.length-2),U)}),ee=S(()=>{let U=[];return A.value.packages.forEach(L=>{L.bookable.filter(x=>x.service.id===w.value.id).length&&!U.filter(x=>x.id===L.id).length&&L.available&&L.status==="visible"&&U.push(L)}),U}),we=C(!1),se=S(()=>{let U=[...ee.value];return we.value?U:U.slice(0,2)}),j=S(()=>u.getters["entities/filteredLocations"](u.getters["booking/getSelection"]));function Pe(){$.value="",Se(()=>{_()})}let f=C(!1),ke=C("760px");Z("bookingDialogWidth",ke);function W(){ie.value.length===1&&u.commit("booking/setEmployeeId",parseInt(ie.value[0].id)),Ee(A.value,w.value.id).length===1&&u.commit("booking/setLocationId",parseInt(Ee(A.value,w.value.id)[0].id)),u.commit("booking/setBookableType","appointment"),f.value=!0}E("restoreFormData").value&&W();function M(U){u.commit("booking/setPackageId",U.id),u.commit("booking/setBookableType","package"),u.commit("booking/setMultipleAppointments",_t(0,U)),u.commit("booking/setMultipleAppointmentsIndex",0),ie.value.length===1&&u.commit("booking/setEmployeeId",parseInt(ie.value[0].id)),Ee(A.value,w.value.id).length===1&&u.commit("booking/setLocationId",parseInt(Ee(A.value,w.value.id)[0].id)),Se(()=>{f.value=!0})}const ne=E("shortcodeData");let ye=C("");Z("stepName",ye);function We(){let U=u.getters["entities/getBookableFromBookableEntities"](u.getters["booking/getSelection"]),L=U.settings?JSON.parse(U.settings):d;"general"in L&&"redirectUrlAfterAppointment"in L.general&&L.general.redirectUrlAfterAppointment?window.location.href=L.general.redirectUrlAfterAppointment:d.general.redirectUrlAfterAppointment?window.location.href=d.general.redirectUrlAfterAppointment:window.location.reload()}function Oe(){if(ye.value&&ye.value==="CongratulationsStep")We();else{u.commit("booking/setEmployeeId",null),u.commit("booking/setLocationId",null);let U=S(()=>({category:ne.value.category,counter:ne.value.counter,employee:ne.value.employee,hasApiCall:ne.value.hasApiCall,location:ne.value.location,service:ne.value.service,show:ne.value.show,trigger:ne.value.trigger}));u.commit("entities/setPreselected",U.value)}ke.value="760px"}let J=C(!1);function O(U,L){let x="";return U>1?(L==="day"&&(x=R.value.expires_days),L==="week"&&(x=R.value.expires_weeks),L==="month"&&(x=R.value.expires_months)):(L==="day"&&(x=R.value.expires_day),L==="week"&&(x=R.value.expires_week),L==="month"&&(x=R.value.expires_month)),x}let z=S(()=>Object.keys(w.value).length===0||ie.value.length===0),G=E("amColors"),Ae=S(()=>({"--am-c-fcis-success-op20":te(G.value.colorSuccess,.2),"--am-c-fcis-primary-op20":te(G.value.colorPrimary,.2),"--am-c-fcis-text-op80":te(G.value.colorMainText,.8),"--am-c-fcis-text-op03":te(G.value.colorMainText,.03),"--am-c-fcis-btn-op50":te(G.value.colorBtnSec,.5)})),Ne=S(()=>({"--am-c-fcis-bgr":G.value.colorMainBgr,"--am-c-fcis-text":G.value.colorMainText,"--am-c-fcis-success":G.value.colorSuccess,"--am-c-fcis-primary":G.value.colorPrimary,"--am-c-scroll-op30":te(G.value.colorPrimary,.3),"--am-c-scroll-op10":te(G.value.colorPrimary,.1),"--am-font-family":b.fontFamily}));return(U,L)=>e(h)?(a(),i(ae,{key:0},[e(z)?m("",!0):(a(),be(Pt,{key:0,ref_key:"contentRef",ref:o,"wrapper-class":"am-fcis","form-class":"am-fcis__form","heading-class":"am-fcis__header","content-class":"am-fcis__content",style:ge(e(Ae))},pt({heading:F(()=>[t("div",{class:B([[{"am-tablet":e(s)<=678},{"am-mobile":e(s)<450}],"am-fcis__header-top"])},[t("div",As,[t("span",Rs,n(e(w).name),1),e(q).serviceBadge.visibility?(a(),i("div",Ms,[Os,t("span",null,n(e(R).heading_service),1)])):m("",!0)]),t("div",Ns,[e(q).servicePrice.visibility?(a(),i("span",Vs,n(e(Ze)(e(A),e(w).id).min||e(Ze)(e(A),e(w).id).max?e(Ze)(e(A),e(w).id).price:e(R).free),1)):m("",!0),t("span",Us,[H(Ie,{type:e(q).bookingBtn.buttonType,onClick:W},{default:F(()=>[xe(n(e(R).book_now),1)]),_:1},8,["type"])])])],2),e(q).serviceCategory.visibility||e(q).serviceDuration.visibility||e(q).serviceCapacity.visibility||e(q).serviceLocation.visibility?(a(),i("div",Ws,[t("div",js,[e(q).serviceCategory.visibility?(a(),i("div",Hs,[qs,t("span",null,n(e(ve).name),1)])):m("",!0),e(q).serviceDuration.visibility?(a(),i("div",Js,[Gs,t("span",null,n(e(Mt)(e(w).duration)),1)])):m("",!0),e(q).serviceCapacity.visibility&&!e(y).isLite?(a(),i("div",Qs,[Xs,t("span",null,n(e(Rt)(e(A),e(w).id)),1)])):m("",!0),e(Ee)(e(A),e(w).id).length&&e(q).serviceLocation.visibility?(a(),i("div",Ys,[Zs,t("span",null,n($e(e(A),e(w).id)),1)])):m("",!0)])])):m("",!0)]),content:F(()=>[e(w).gallery.length?(a(),i("div",Ks,[t("div",{class:B(["am-fcis__gallery-hero",[{w100:e(w).gallery.length===1},{"am-mobile w100":e(s)<678}]]),style:ge({backgroundImage:`url(${e(w).gallery[0].pictureFullPath})`})},null,6),e(K).length&&e(s)>677?(a(),i("div",el,[(a(!0),i(ae,null,_e(e(K),(x,T)=>(a(),i("div",{key:T,class:B(["am-fcis__gallery-thumb",{"am-one-thumb":e(K).length===1}]),style:ge({backgroundImage:`url(${x.pictureFullPath})`})},null,6))),128))])):m("",!0),H(Ie,{"custom-class":`am-fcis__gallery-btn${e(s)<678?" am-mobile":""}`,category:"secondary",type:"filled",onClick:L[0]||(L[0]=()=>pe(J)?J.value=!0:J=!0)},{default:F(()=>[xe(n(e(R).view_all_photos),1)]),_:1},8,["custom-class"])])):m("",!0),H(it,{modelValue:e(J),"onUpdate:modelValue":L[4]||(L[4]=x=>pe(J)?J.value=x:J=x),"modal-class":"amelia-v2-booking amelia-v2-sgd","append-to-body":!0,center:!0,"lock-scroll":!1,width:"768px"},{default:F(()=>[t("div",{class:"am-gd",style:ge(e(Ne))},[t("div",tl,[t("div",al,[t("span",{class:"am-icon-arrow-left",onClick:L[1]||(L[1]=()=>pe(V)?V.value=e(V)<=0?e(w).gallery.length-1:e(V)-1:V=e(V)<=0?e(w).gallery.length-1:e(V)-1)}),t("span",{class:"am-icon-arrow-right",onClick:L[2]||(L[2]=()=>pe(V)?V.value=e(w).gallery.length-1===e(V)?0:e(V)+1:V=e(w).gallery.length-1===e(V)?0:e(V)+1)})]),(a(!0),i(ae,null,_e(e(w).gallery,(x,T)=>(a(),i("div",{key:T,class:"am-gd__display",style:ge({display:T===e(V)?"flex":"none"}),onClick:L[3]||(L[3]=()=>pe(V)?V.value=e(w).gallery.length-1===e(V)?0:e(V)+1:V=e(w).gallery.length-1===e(V)?0:e(V)+1)},[t("img",{src:x.pictureFullPath,alt:T},null,8,il)],4))),128))]),t("div",sl,n(`${e(V)+1}/${e(w).gallery.length}`),1),t("div",ll,[(a(!0),i(ae,null,_e(e(w).gallery,(x,T)=>(a(),i("div",{key:T,class:B(["am-gd__thumb",{"am-active":T===e(V)}]),style:ge({backgroundImage:`url(${x.pictureFullPath})`}),onClick:()=>pe(V)?V.value=T:V=T},null,14,nl))),128))])],4)]),_:1},8,["modelValue"]),e(q).serviceDescription.visibility&&e(Te)(e(w).description)||e(q).serviceEmployees.visibility?(a(),i("div",ol,[t("div",cl,[e(Te)(e(w).description)&&e(q).serviceDescription.visibility?(a(),i("div",{key:0,class:B(["am-fcis__info-tab",{"am-active":e(oe)==="description"}]),onClick:L[5]||(L[5]=()=>pe(oe)?oe.value="description":oe="description")},n(e(R).about_service),3)):m("",!0),e(q).serviceEmployees.visibility&&!e(y).isLite?(a(),i("div",{key:1,class:B([{"am-active":e(oe)==="employees"},"am-fcis__info-tab"]),onClick:L[6]||(L[6]=()=>pe(oe)?oe.value="employees":oe="employees")},n(e(R).tab_employees),3)):m("",!0)]),t("div",rl,[e(Te)(e(w).description)&&e(q).serviceDescription.visibility?dt((a(),i("div",ul,[t("div",{class:B(["am-fcis__info-service__desc",{"ql-description":e(w).description.includes("<!-- Content -->")}]),innerHTML:e(w).description},null,10,dl)],512)),[[mt,e(oe)==="description"]]):m("",!0),e(q).serviceEmployees.visibility?dt((a(),i("div",ml,[H(ct,null,{default:F(()=>[(a(!0),i(ae,null,_e(e(ie),x=>(a(),be(rt,{key:x.id,side:""},{heading:F(()=>[t("div",{class:B([{"am-mobile":e(s)<451},"am-fcis__info-employee"])},[t("div",pl,[H(Ye,{"item-class":"am-fcis__info-employee__img","item-data":x,"trim-string":3},null,8,["item-data"]),t("div",_l,[t("div",vl,n(x.firstName)+" "+n(x.lastName),1),X(x)&&e(q).serviceEmployeePrice.visibility?(a(),i("div",fl,n(X(x)),1)):m("",!0)])])],2)]),default:F(()=>[e(Te)(x.description)?(a(),i("div",{key:0,class:B(["am-fcis__info-employee__description",{"ql-description":x.description.includes("<!-- Content -->")}]),innerHTML:x.description},null,10,gl)):m("",!0)]),_:2},1024))),128))]),_:1})],512)),[[mt,e(oe)==="employees"]]):m("",!0)])])):m("",!0),e(ee).length&&e(ne).show!=="services"&&e(q).servicePackages.visibility?(a(),i("div",yl,[t("div",hl,[t("span",bl,n(e(R).service_available_in_package),1),e(ee).length>2?(a(),i("span",{key:0,class:"am-fcis__include-heading__btn",onClick:L[7]||(L[7]=()=>pe(we)?we.value=!e(we):we=!e(we))},[e(we)?(a(),i(ae,{key:1},[xe(n(e(R).less_packages),1)],64)):(a(),i(ae,{key:0},[xe(n(e(R).more_packages),1)],64))])):m("",!0)]),(a(!0),i(ae,null,_e(e(se),x=>(a(),i("div",{key:x.id,class:"am-fcis__include",onClick:T=>M(x)},[t("div",$l,[e(s)>450?(a(),be(Ye,{key:0,"item-class":"am-fcis__include-img","item-data":x,"trim-string":3},null,8,["item-data"])):m("",!0),t("div",{class:B([{"am-mobile":e(s)<451},"am-fcis__include-text"])},[t("div",{class:B(["am-fcis__include-header",{"am-mobile":e(s)<600}])},[t("div",{class:B(["am-fcis__include-name",{"am-mobile":e(s)<600}])},n(x.name),3),e(q).packagePrice.visibility?(a(),i("div",wl,[x.discount?(a(),i("span",Cl,n(`${e(R).save} ${x.discount}%`),1)):m("",!0),t("span",Sl,n(x.price?e(Ue)(x.calculatedPrice?x.price:x.price-x.price/100*x.discount):e(R).free),1)])):m("",!0)],2),t("div",xl,[e(q).packageCategory.visibility?(a(),i("div",Pl,[El,t("span",null,n(e(ve).name),1)])):m("",!0),e(q).packageDuration.visibility?(a(),i("div",Dl,[Ll,x.endDate?(a(),i("span",Il,n(`${e(R).expires_at} ${x.endDate.split(" ")[0]}`),1)):x.durationCount?(a(),i("span",Tl,n(`${e(R).expires_after} ${x.durationCount} ${O(x.durationCount,x.durationType)}`),1)):(a(),i("span",Bl,n(e(R).without_expiration),1))])):m("",!0),e(q).packageCapacity.visibility?(a(),i("div",Fl,Rl)):m("",!0),e(q).packageLocation.visibility&&e(j).length?(a(),i("div",Ml,[Ol,t("span",null,n(e(j).length===1?e(j)[0].address?e(j)[0].address:e(j)[0].name:e(R).multiple_locations),1)])):m("",!0),e(q).packageServices.visibility?(a(),i("div",Nl,[t("span",null,n(`${e(R).in_package}:`),1),(a(!0),i(ae,null,_e(x.bookable,T=>(a(),i("span",{key:T.id},n(T.service.name),1))),128))])):m("",!0)])],2)])],8,kl))),128))])):m("",!0),H(it,{modelValue:e(f),"onUpdate:modelValue":L[8]||(L[8]=x=>pe(f)?f.value=x:f=x),"append-to-body":!0,"modal-class":"amelia-v2-booking amelia-v2-booking-dialog","destroy-on-close":!0,center:!0,"lock-scroll":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:e(ke),onClosed:Oe},{default:F(()=>[H(Nt)]),_:1},8,["modelValue","width"])]),_:2},[e(ne).service?void 0:{name:"header",fn:F(()=>[H(xt,{"btn-string":e(R).back_btn,"btn-type":e(q).backBtn.buttonType,onClick:Pe},null,8,["btn-string","btn-type"])])}]),1032,["style"])),e(z)?(a(),i("div",Vl,[t("img",{src:e(k).wpAmeliaPluginURL+"/v3/src/assets/img/am-empty-booking.svg"},null,8,Ul),t("div",Wl,n(e(R).oops),1),t("div",jl,n(e(ne).show!=="packages"?e(R).no_services_employees:e(R).no_package_services),1),t("div",Hl,[e(ne).show!=="packages"?(a(),i("span",ql,n(e(R).add_services_employees)+"\xA0 ",1)):m("",!0),t("a",Jl,n(e(R).add_services_url)+"\xA0 ",1),e(ne).show!=="packages"?(a(),i("span",Gl,n(e(R).and)+"\xA0 ",1)):m("",!0),e(ne).show!=="packages"?(a(),i("a",Ql,n(e(R).add_employees_url),1)):m("",!0)])],512)):m("",!0)],64)):m("",!0)}});const Zl={class:"am-fcip__header-text"},Kl={class:"am-fcip__header-name"},en={key:0,class:"am-fcip__badge am-package"},tn=t("span",{class:"am-icon-shipment"},null,-1),an={class:"am-fcip__header-action"},sn={key:0,class:"am-fcip__header-discount"},ln={key:1,class:"am-fcip__header-price"},nn={class:"am-fcip__header-btn"},on={key:0,class:"am-fcip__header-bottom"},cn={class:"am-fcip__mini-info"},rn={key:0,class:"am-fcip__mini-info__inner"},un=t("span",{class:"am-icon-folder"},null,-1),dn={key:1,class:"am-fcip__mini-info__inner"},mn=t("span",{class:"am-icon-clock"},null,-1),pn={key:0},_n={key:1},vn={key:2},fn={key:2,class:"am-fcip__mini-info__inner"},gn=t("span",{class:"am-icon-user"},null,-1),yn=t("span",null,"1/1",-1),hn=[gn,yn],bn={key:3,class:"am-fcip__mini-info__inner"},kn=t("span",{class:"am-icon-locations"},null,-1),$n={key:0,class:"am-fcip__gallery"},wn={key:0,class:"am-fcip__gallery-thumb__wrapper"},Cn=t("span",{class:"am-icon-gallery"},null,-1),Sn={class:"am-gd__display-wrapper"},xn={class:"am-gd__arrows",style:{display:"flex","justify-content":"space-between"}},Pn=["src","alt"],En={class:"am-gd__selection"},Dn={class:"am-gd__thumb-wrapper"},Ln=["onClick"],In={key:1,class:"am-fcip__info"},Tn={class:"am-fcip__info-tab__wrapper"},Bn={class:"am-fcip__info-content__wrapper"},Fn={key:0,class:"am-fcip__info-content"},zn=["innerHTML"],An={key:1,class:"am-fcip__info-content"},Rn={class:"am-fcip__info-employee"},Mn={class:"am-fcip__info-employee__hero"},On={class:"am-fcip__info-employee__name"},Nn=["innerHTML"],Vn={key:2,class:"am-fcip__include-wrapper"},Un={class:"am-fcip__include-heading"},Wn={class:"am-fcip__include-heading__text"},jn={class:"am-fcip__include-service"},Hn={class:"am-fcip__include-service__info"},qn={key:0},Jn=["innerHTML"],Gn={class:"am-fcip__include-footer"},Qn={class:"am-fcip__include-footer__text"},Xn={key:1,ref:"ameliaContainer",class:"am-empty"},Yn=["src"],Zn={class:"am-empty__heading"},Kn={class:"am-empty__subheading"},eo={class:"am-empty__text"},to={href:"https://wpamelia.com/services-and-categories/"},ao={name:"CategoryPackage"},io=Object.assign(ao,{setup(g){let{previousPage:y}=E("changingPageFunctions",{previousPage:()=>{}}),_=C(),h=E("containerWidth");const k=E("settings"),o=E("baseUrls");let s=Ke();const d=E("shortcodeData");let b=E("amEntities"),l=E("customizedDataForm"),p=S(()=>l.value.categoryPackage.options),Q=E("itemType"),R=E("categorySelected"),V=S(()=>b.value.categories.find(J=>J.id===R.value)),u=S(()=>b.value.packages.find(J=>J.id===s.getters["booking/getPackageId"])),A=C(0),v=C("description"),q=S(()=>Ot(b.value,u.value,d.value)),$=S(()=>Qe(b.value,u.value,d.value)),de=C(d.value.employee?b.value.unfilteredEmployees.filter(J=>J.id===parseInt(d.value.employee)):b.value.unfilteredEmployees);function ve(J){let O=[];return J.providers.length?J.providers.forEach(z=>{de.value.find(G=>G.id===parseInt(z.id))&&O.push(de.value.find(G=>G.id===parseInt(z.id)))}):O=de.value.filter(z=>z.serviceList.find(G=>G.id===J.service.id)),O}Le(()=>{p.value.packageDescription.visibility||(v.value="employees"),Te(u.value.description)||(v.value="employees")});let w=C(!1);St(()=>{w.value=s.getters["entities/getEmployees"].length===0||q.value.length===0});let $e=C(!1),oe=S(()=>{let J=u.value.gallery.length?JSON.parse(JSON.stringify(u.value.gallery)):[];return u.value.gallery.length===1?[]:(J.shift(),J.length>2&&J.splice(2,J.length-2),J)});function ie(){Q.value="",Se(()=>{y()})}let X=C(!1),K=C("760px");Z("bookingDialogWidth",K);function ee(){s.commit("booking/setMultipleAppointments",_t(0,u.value)),s.commit("booking/setMultipleAppointmentsIndex",0),s.commit("booking/setBookableType","package"),Se(()=>{X.value=!0})}E("restoreFormData").value&&ee();let se=C("");Z("stepName",se);function j(){let J=s.getters["entities/getBookableFromBookableEntities"](s.getters["booking/getSelection"]),O=J.settings?JSON.parse(J.settings):k;"general"in O&&"redirectUrlAfterAppointment"in O.general&&O.general.redirectUrlAfterAppointment?window.location.href=O.general.redirectUrlAfterAppointment:k.general.redirectUrlAfterAppointment?window.location.href=k.general.redirectUrlAfterAppointment:window.location.reload()}function Pe(){if(se.value&&se.value==="CongratulationsStep")j();else{let J=S(()=>({category:d.value.category,counter:d.value.counter,employee:d.value.employee,hasApiCall:d.value.hasApiCall,location:d.value.location,service:d.value.service,show:d.value.show,trigger:d.value.trigger}));s.commit("entities/setPreselected",J.value)}K.value="760px"}let f=E("amFonts");const ke=E("labels"),W=E("localLanguage");let ce=S(()=>k.general.usedLanguages.includes(W.value)),M=S(()=>{let J=He(je({},ke));if(k.customizedData&&k.customizedData.cbf&&k.customizedData.cbf.categoryPackage.translations){let O=k.customizedData.cbf.categoryPackage.translations;Object.keys(O).forEach(z=>{O[z][W.value]&&ce.value?J[z]=O[z][W.value]:O[z].default&&(J[z]=O[z].default)})}return J});function ne(J,O){let z="";return J>1?(O==="day"&&(z=M.value.expires_days),O==="week"&&(z=M.value.expires_weeks),O==="month"&&(z=M.value.expires_months)):(O==="day"&&(z=M.value.expires_day),O==="week"&&(z=M.value.expires_week),O==="month"&&(z=M.value.expires_month)),z}let ye=E("amColors"),We=S(()=>({"--am-c-fcip-success-op20":te(ye.value.colorSuccess,.2),"--am-c-fcip-primary-op20":te(ye.value.colorPrimary,.2),"--am-c-fcip-text-op80":te(ye.value.colorMainText,.8),"--am-c-fcip-text-op60":te(ye.value.colorMainText,.6),"--am-c-fcip-text-op03":te(ye.value.colorMainText,.03),"--am-c-fcip-btn-op50":te(ye.value.colorBtnSec,.5)})),Oe=S(()=>({"--am-c-fcip-bgr":ye.value.colorMainBgr,"--am-c-fcip-text":ye.value.colorMainText,"--am-c-fcip-success":ye.value.colorSuccess,"--am-c-fcip-primary":ye.value.colorPrimary,"--am-c-scroll-op30":te(ye.value.colorPrimary,.3),"--am-c-scroll-op10":te(ye.value.colorPrimary,.1),"--am-font-family":f.fontFamily}));return(J,O)=>(a(),i(ae,null,[e(w)?m("",!0):(a(),be(Pt,{key:0,ref_key:"contentRef",ref:_,"wrapper-class":"am-fcip","form-class":"am-fcip__form","heading-class":"am-fcip__header","content-class":"am-fcip__content",style:ge(e(We))},pt({heading:F(()=>[t("div",{class:B([[{"am-tablet":e(h)<=678},{"am-mobile":e(h)<450}],"am-fcip__header-top"])},[t("div",Zl,[t("span",Kl,[t("span",null,n(e(u).name),1)]),e(p).packageBadge.visibility?(a(),i("div",en,[tn,t("span",null,n(e(M).package),1)])):m("",!0)]),t("div",an,[e(u).discount&&e(p).packagePrice.visibility?(a(),i("span",sn,n(`${e(M).save} ${e(u).discount}%`),1)):m("",!0),e(p).packagePrice.visibility?(a(),i("span",ln,n(e(u).price?e(Ue)(e(u).calculatedPrice?e(u).price:e(u).price-e(u).price/100*e(u).discount):e(M).free),1)):m("",!0),t("span",nn,[H(Ie,{type:e(p).bookingBtn.buttonType,onClick:ee},{default:F(()=>[xe(n(e(M).book_now),1)]),_:1},8,["type"])])])],2),e(p).packageCategory.visibility&&!e(d).package||e(p).packageDuration.visibility||e(p).packageCapacity.visibility||e(p).packageLocation.visibility&&e($).length?(a(),i("div",on,[t("div",cn,[!e(d).package&&e(p).packageBadge.visibility?(a(),i("div",rn,[un,t("span",null,n(e(V).name),1)])):m("",!0),e(p).packageDuration.visibility?(a(),i("div",dn,[mn,e(u).endDate?(a(),i("span",pn,n(`${e(M).expires_at} ${e(u).endDate.split(" ")[0]}`),1)):e(u).durationCount?(a(),i("span",_n,n(`${e(M).expires_after} ${e(u).durationCount} ${ne(e(u).durationCount,e(u).durationType)}`),1)):(a(),i("span",vn,n(e(M).without_expiration),1))])):m("",!0),e(p).packageCapacity.visibility?(a(),i("div",fn,hn)):m("",!0),e($).length&&e(p).packageLocation.visibility?(a(),i("div",bn,[kn,t("span",null,n(e($).length===1?e($)[0].address?e($)[0].address:e($)[0].name:e(M).multiple_locations),1)])):m("",!0)])])):m("",!0)]),content:F(()=>[e(u).gallery.length?(a(),i("div",$n,[t("div",{class:B(["am-fcip__gallery-hero",[{w100:e(u).gallery.length===1},{"am-mobile w100":e(h)<678}]]),style:ge({backgroundImage:`url(${e(u).gallery[0].pictureFullPath})`})},null,6),e(oe).length&&e(h)>677?(a(),i("div",wn,[(a(!0),i(ae,null,_e(e(oe),(z,G)=>(a(),i("div",{key:G,class:B(["am-fcip__gallery-thumb",{"am-one-thumb":e(oe).length===1}]),style:ge({backgroundImage:`url(${z.pictureFullPath})`})},null,6))),128))])):m("",!0),H(Ie,{"custom-class":`am-fcip__gallery-btn${e(h)<678?" am-mobile":""}`,category:"secondary",type:"filled",onClick:O[0]||(O[0]=()=>pe($e)?$e.value=!0:$e=!0)},{default:F(()=>[Cn,t("span",null,n(e(M).view_all_photos),1)]),_:1},8,["custom-class"])])):m("",!0),H(it,{modelValue:e($e),"onUpdate:modelValue":O[4]||(O[4]=z=>pe($e)?$e.value=z:$e=z),"modal-class":"amelia-v2-booking amelia-v2-gdp","append-to-body":!0,center:!0,"lock-scroll":!1,width:"768px"},{default:F(()=>[t("div",{class:"am-gd",style:ge(e(Oe))},[t("div",Sn,[t("div",xn,[t("span",{class:"am-icon-arrow-left",onClick:O[1]||(O[1]=()=>pe(A)?A.value=e(A)<=0?e(u).gallery.length-1:e(A)-1:A=e(A)<=0?e(u).gallery.length-1:e(A)-1)}),t("span",{class:"am-icon-arrow-right",onClick:O[2]||(O[2]=()=>pe(A)?A.value=e(u).gallery.length-1===e(A)?0:e(A)+1:A=e(u).gallery.length-1===e(A)?0:e(A)+1)})]),(a(!0),i(ae,null,_e(e(u).gallery,(z,G)=>(a(),i("div",{key:G,class:"am-gd__display",style:ge({display:G===e(A)?"flex":"none"}),onClick:O[3]||(O[3]=()=>pe(A)?A.value=e(u).gallery.length-1===e(A)?0:e(A)+1:A=e(u).gallery.length-1===e(A)?0:e(A)+1)},[t("img",{src:z.pictureFullPath,alt:G},null,8,Pn)],4))),128))]),t("div",En,n(`${e(A)+1}/${e(u).gallery.length}`),1),t("div",Dn,[(a(!0),i(ae,null,_e(e(u).gallery,(z,G)=>(a(),i("div",{key:G,class:B(["am-gd__thumb",{"am-active":G===e(A)}]),style:ge({backgroundImage:`url(${z.pictureFullPath})`}),onClick:()=>pe(A)?A.value=G:A=G},null,14,Ln))),128))])],4)]),_:1},8,["modelValue"]),e(p).packageDescription.visibility&&e(Te)(e(u).description)||e(p).packageEmployees.visibility?(a(),i("div",In,[t("div",Tn,[e(Te)(e(u).description)&&e(p).packageDescription.visibility?(a(),i("div",{key:0,class:B(["am-fcip__info-tab",{"am-active":e(v)==="description"}]),onClick:O[5]||(O[5]=()=>pe(v)?v.value="description":v="description")},n(e(M).about_package),3)):m("",!0),e(p).packageEmployees.visibility?(a(),i("div",{key:1,class:B([{"am-active":e(v)==="employees"},"am-fcip__info-tab"]),onClick:O[6]||(O[6]=()=>pe(v)?v.value="employees":v="employees")},n(e(M).tab_employees),3)):m("",!0)]),t("div",Bn,[e(Te)(e(u).description)&&e(p).packageDescription.visibility?dt((a(),i("div",Fn,[t("div",{class:B(["am-fcip__info-service__desc",{"ql-description":e(u).description.includes("<!-- Content -->")}]),innerHTML:e(u).description},null,10,zn)],512)),[[mt,e(v)==="description"]]):m("",!0),e(p).packageEmployees.visibility?dt((a(),i("div",An,[H(ct,null,{default:F(()=>[(a(!0),i(ae,null,_e(e(q),z=>(a(),be(rt,{key:z.id,side:""},{heading:F(()=>[t("div",Rn,[t("div",Mn,[H(Ye,{"item-class":"am-fcip__info-employee__img","item-data":z,"trim-string":3},null,8,["item-data"]),t("div",On,n(z.firstName)+" "+n(z.lastName),1)])])]),default:F(()=>[e(Te)(z.description)?(a(),i("div",{key:0,class:B(["am-fcip__info-employee__description",{"ql-description":z.description.includes("<!-- Content -->")}]),innerHTML:z.description},null,10,Nn)):m("",!0)]),_:2},1024))),128))]),_:1})],512)),[[mt,e(v)==="employees"]]):m("",!0)])])):m("",!0),e(p).packageServices.visibility?(a(),i("div",Vn,[t("div",Un,[t("span",Wn,n(`${e(M).package_includes}:`),1)]),H(ct,null,{default:F(()=>[(a(!0),i(ae,null,_e(e(u).bookable,z=>(a(),be(rt,{key:z.id,side:!0},{heading:F(()=>[t("div",jn,[H(Ye,{"item-class":"am-fcip__include-service__img","item-data":z.service},null,8,["item-data"]),xe(" "+n(z.service.name+(e(u).sharedCapacity?"":" x"+z.quantity)),1)])]),default:F(()=>[t("div",Hn,[t("span",null,n(`${e(M).tab_employees}:`),1),(a(!0),i(ae,null,_e(ve(z).slice(0,6),G=>(a(),be(Ye,{key:G.id,"item-class":"am-fcip__include-service__info-name","item-data":G,"trim-string":3},null,8,["item-data"]))),128)),ve(z).length>6?(a(),i("span",qn," + "+n(ve(z).length-6),1)):m("",!0),e(Te)(z.service.description)?(a(),i("div",{key:1,class:B(["am-fcip__include-service__info-description",{"ql-description":z.service.description.includes("<!-- Content -->")}]),innerHTML:z.service.description},null,10,Jn)):m("",!0)])]),_:2},1024))),128))]),_:1}),t("div",Gn,[t("span",Qn,n(e(M).package_book_service),1)])])):m("",!0),H(it,{modelValue:e(X),"onUpdate:modelValue":O[7]||(O[7]=z=>pe(X)?X.value=z:X=z),"append-to-body":!0,"modal-class":"amelia-v2-booking amelia-v2-booking-dialog","destroy-on-close":!0,center:!0,"lock-scroll":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:e(K),onClosed:Pe},{default:F(()=>[H(Nt)]),_:1},8,["modelValue","width"])]),_:2},[e(d).package?void 0:{name:"header",fn:F(()=>[H(xt,{"btn-string":e(M).back_btn,"btn-type":e(p).backBtn.buttonType,onClick:ie},null,8,["btn-string","btn-type"])])}]),1032,["style"])),e(w)?(a(),i("div",Xn,[t("img",{src:e(o).wpAmeliaPluginURL+"/v3/src/assets/img/am-empty-booking.svg"},null,8,Yn),t("div",Zn,n(e(M).oops),1),t("div",Kn,n(e(M).no_package_services),1),t("div",eo,[t("a",to,n(e(M).add_services_url)+"\xA0 ",1)])],512)):m("",!0)],64))}});const so={name:"CatalogSkeleton"},lo=Object.assign(so,{setup(g){let y=C(null),_=C(0);window.addEventListener("resize",h);function h(){y.value&&(_.value=y.value.offsetWidth)}Le(()=>{y.value&&(_.value=y.value.offsetWidth)});let k=S(()=>_.value<=500?"am-w100":_.value<=600?"am-w50":_.value<=768?"am-w33":"");return(o,s)=>{const d=ka,b=ba;return a(),i("div",{ref_key:"amSkeletonContainer",ref:y,class:"am-skeleton-catalog__wrapper"},[H(b,{animated:"",class:"am-skeleton-catalog"},{template:F(()=>[(a(!0),i(ae,null,_e(new Array(8),l=>(a(),i("div",{key:l,class:B(["am-skeleton-catalog__item",e(k)])},[H(d,{class:"am-skeleton-catalog__item-inner",variant:"text"})],2))),128))]),_:1})],512)}}});const no=t("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),oo=t("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),co=["href"],ro={name:"CatalogFormWrapper"},uo=Object.assign(ro,{emits:["isRestored"],setup(g,{emit:y}){let _=E("isMounted"),h=E("licence"),k=C(null);const o=E("baseUrls");let s=C(0);Z("containerWidth",s),window.addEventListener("resize",d);function d(){k.value&&(s.value=k.value.offsetWidth)}Le(()=>{document.getElementById("amelia-v2-booking-"+p.value.counter).classList.add("amelia-v2-booking-"+p.value.counter+"-loaded"),at(Q,{},"ViewContent","appointment",null,null),d(),_.value=!0});let b=C(!1);const l=E("settings"),p=E("shortcodeData"),Q=Ke();Q.commit("entities/setPreselected",p.value),Q.dispatch("entities/getEntities",{types:["employees","categories","locations","packages","entitiesRelations","customFields"],licence:h,loadEntities:p.value.trigger||window.ameliaShortcodeData.filter(W=>!W.hasApiCall).length===window.ameliaShortcodeData.length?!0:p.value.hasApiCall});const R=Ce(ai),V=Ce(rs),u=Ce(Yl),A=Ce(io);let v=C([R,V]),q=C(0),$=C(null);Z("categorySelected",$);let de=C([]);Z("availableCategories",de);let ve=C("");Z("itemType",ve),ut(ve,()=>{ve.value==="appointment"&&v.value.push(u),ve.value==="package"&&v.value.push(A),ve.value===""&&v.value.forEach((W,ce)=>{W.name==="CategoryService"&&w(v.value,ce),W.name==="CategoryPackage"&&w(v.value,ce)})});function w(W,ce){W.splice(ce,1)}function $e(){q.value=q.value+1,k.value.scrollIntoView({behavior:"smooth",block:"start"})}function oe(){q.value=q.value-1}Z("changingPageFunctions",{nextPage:$e,previousPage:oe});let ie=S(()=>Q.getters["entities/getReady"]),X=S(()=>Q.state.entities);Z("amEntities",X);function K(){let W=Q.getters["entities/getPreselected"];if(p.value.categories_hidden&&!p.value.category&&(de.value=JSON.parse(JSON.stringify(za(X.value,p.value))),$.value=parseInt(de.value.length?de.value[0].id:null),Q.commit("booking/setCategoryId",parseInt($.value)),Se(()=>{let ce=v.value.findIndex(M=>M.name==="CategoriesList");v.value.splice(ce,1)})),p.value.category&&(Q.commit("booking/setCategoryId",parseInt(W.category)),$.value=parseInt(W.category),de.value=JSON.parse(JSON.stringify(X.value.categories.filter(ce=>ce.id===parseInt(W.category)&&ce.status==="visible"&&ce.serviceList.length&&!!st(ce,X.value).length))),Se(()=>{let ce=v.value.findIndex(M=>M.name==="CategoriesList");v.value.splice(ce,1)})),p.value.service){Q.commit("booking/setServiceId",parseInt(W.service));let ce=Q.getters["entities/getService"](parseInt(W.service));$.value=parseInt(W.category),Q.commit("booking/setCategoryId",ce?parseInt(ce.categoryId):null),Se(()=>{v.value=[],v.value.push(u)})}p.value.employee&&Q.commit("booking/setEmployeeId",parseInt(W.employee)),p.value.location&&Q.commit("booking/setLocationId",parseInt(W.location)),p.value.package&&(Q.commit("booking/setPackageId",parseInt(W.package)),v.value=[],v.value.push(A)),p.value.show==="packages"?Q.commit("booking/setBookableType","package"):Q.commit("booking/setBookableType","appointment")}let ee=S(()=>ie.value?$a(Q,p.value):null);Z("restoreFormData",ee),ut(ie,W=>{W&&(K(),b.value=Q.getters["entities/getServices"].length===0||Q.getters["entities/getEmployees"].length===0,ee.value&&(ve.value=Q.state.booking.appointment.type,Se(()=>{q.value=v.value.length-1,$.value=Q.state.booking.appointment.categoryId,y("isRestored",ee.value)})))});let we=S(()=>l.customizedData&&"cbf"in l.customizedData?l.customizedData.cbf:Xe.cbf);Z("customizedDataForm",we);const se=C(l.customizedData?l.customizedData.fonts:Xe.fonts);Z("amFonts",se);let j=S(()=>l.customizedData&&"cbf"in l.customizedData?l.customizedData.cbf.colors:Xe.cbf.colors);Z("amColors",j);let Pe=S(()=>({"--am-c-primary":j.value.colorPrimary,"--am-c-success":j.value.colorSuccess,"--am-c-error":j.value.colorError,"--am-c-warning":j.value.colorWarning,"--am-c-main-bgr":j.value.colorMainBgr,"--am-c-main-heading-text":j.value.colorMainHeadingText,"--am-c-main-text":j.value.colorMainText,"--am-c-sb-bgr":j.value.colorSbBgr,"--am-c-sb-text":j.value.colorSbText,"--am-c-inp-bgr":j.value.colorInpBgr,"--am-c-inp-border":j.value.colorInpBorder,"--am-c-inp-text":j.value.colorInpText,"--am-c-inp-placeholder":j.value.colorInpPlaceHolder,"--am-c-drop-bgr":j.value.colorDropBgr,"--am-c-drop-text":j.value.colorDropText,"--am-c-card-bgr":j.value.colorCardBgr,"--am-c-card-text":j.value.colorCardText,"--am-c-card-border":j.value.colorCardBorder,"--am-c-btn-prim":j.value.colorBtnPrim,"--am-c-btn-prim-text":j.value.colorBtnPrimText,"--am-c-btn-sec":j.value.colorBtnSec,"--am-c-btn-sec-text":j.value.colorBtnSecText,"--am-c-skeleton-op20":te(j.value.colorMainText,.2),"--am-c-skeleton-op60":te(j.value.colorMainText,.6),"--am-font-family":se.value.fontFamily}));function f(){let W=document.head||document.getElementsByTagName("head")[0];W.querySelector("#amCustomFont")&&W.querySelector("#amCustomFont").remove();let ce=`@font-face {font-family: '${se.value.fontFamily}'; src: url(${se.value.fontUrl});}`,M=document.createElement("style");W.appendChild(M),M.setAttribute("type","text/css"),M.setAttribute("id","amCustomFont"),M.appendChild(document.createTextNode(ce))}se.value.customFontSelected&&f();let ke=S(()=>({colorInputBorderRadius:"6px"}));return Z("amDesignProperties",ke),(W,ce)=>(a(),i(ae,null,[se.value.customFontSelected?m("",!0):(a(),i(ae,{key:0},[no,oo,t("link",{rel:"stylesheet",type:"text/css",href:`${e(o).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,co)],64)),t("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:k,class:"am-fc__wrapper",style:ge(e(Pe))},[e(ie)&&e(v).length?(a(),be(At(e(v)[e(q)]),{key:0})):(a(),be(lo,{key:1}))],4)],64))}});var _o=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"}));export{_o as C,Ct as _,Ta as a,xt as b,Ye as c,Pt as d,uo as e};

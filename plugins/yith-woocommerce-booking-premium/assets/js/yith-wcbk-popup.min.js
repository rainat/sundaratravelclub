!function(r,f,h){r.fn.yith_wcbk_popup=function(p){var o=null,s={},t=(s.popup=r(this),{popup_class:"yith-wcbk-popup",overlay_class:"yith-wcbk-overlay",close_btn_class:"yith-wcbk-popup-close",position:"center",popup_delay:0,ajax:!(s.opts={}),ajax_container:"yith-wcbk-popup-ajax-container",url:"",ajax_data:{},ajax_custom_get_content:!1,popup_css:{width:"50%"},block_params:{message:bk.loader_svg,blockMsgClass:"yith-wcbk-block-ui-element",css:{border:"none",background:"transparent"},overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0}}),a=(s.init=function(){s.opts=r.extend({},t,p),("close"===p?d:(a(),!0===s.opts.ajax?n():(s.popup=s.popup.clone(),s.popup.css(s.opts.popup_css).addClass("yith-wcbk-popup-opened"),r(h.body).append(s.popup)),e("init-center"),c(),i))()},function(){0<r(h).find("."+s.opts.overlay_class).length?o=r(h).find("."+s.opts.overlay_class).first():(o=r("<div />").addClass(s.opts.overlay_class),r(h.body).append(o))}),n=function(){s.popup=r("<div />").addClass(s.opts.popup_class);var p=r("<span />").addClass(s.opts.close_btn_class+" dashicons dashicons-no-alt"),o=r("<div />").addClass(s.opts.ajax_container);s.popup.append(p),s.popup.append(o),r(h.body).append(s.popup),s.popup.block(s.opts.block_params),s.opts.ajax_custom_get_content||r.ajax({data:s.opts.ajax_data,url:s.opts.url,success:function(p){s.popup.find("."+s.opts.ajax_container).html(p),s.popup.unblock(),u()}})},e=function(p){var o=s.popup.outerWidth(),t=s.popup.outerHeight(),a=Math.max(0,(r(f).height()-t)/2),n=Math.max(0,(r(f).width()-o)/2);switch(p){case"init-center":s.popup.css({position:"fixed",top:"calc(50% - 100px)",left:"calc(50% - 100px)",width:"100px",height:"100px"});break;case"big-center":s.popup.css({position:"fixed",top:"5%",left:"5%",width:"90%",height:"90%"});break;case"center":s.popup.css({position:"fixed",top:a+"px",left:n+"px"})}},c=function(){r(h).on("click","."+s.opts.overlay_class,function(){d()}),s.popup.on("click","."+s.opts.close_btn_class,function(){d()})},i=function(){o.fadeIn("fast"),s.popup.fadeIn("fast",function(){s.opts.ajax||u()})},u=function(){s.popup.children().hide(),s.popup.show(),s.popup.animate({opacity:1,top:"5%",left:"5%",width:"90%",height:"90%",easing:"easeOutBounce"},{duration:300,complete:function(){s.popup.children().fadeIn("fast")}})},l=function(){o.remove(),s.popup.remove()},d=function(){r(h).find("."+s.opts.overlay_class).hide(),s.popup.hide(),l()};return s.init(),s.popup.on("yith_wcbk_popup:set_ajax_content",function(p,o){s.popup.find("."+s.opts.ajax_container).html(o),s.popup.unblock(),u()}),s.popup}}(jQuery,window,document);
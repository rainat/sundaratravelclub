!function(o){var n,c,a=wp.template("yith-wcbk-create-booking"),r=bk.blockParams,k=wcbk_admin.panelPage,b="panel/dashboard/bookings-calendar"===k;o(document).on("click",".yith-wcbk-create-booking",function(t){t.preventDefault();var e,t=o(a({})),i=t.find(".yith-wcbk-create-booking__cancel");n=o(this).data("create-start-date"),c=o(this).data("create-start-time"),e=yith.ui.modal({title:wcbk_admin.i18n.create_booking,content:t,classes:{wrap:"yith-wcbk-create-booking-modal"},scrollContent:!1,width:"100%",closeWhenClickingOnOverlay:!0,onClose:function(){c=n=""}}),i.on("click",e.close),o(document.body).trigger("yith-framework-enhanced-select-init"),o(document.body).trigger("wc-enhanced-select-init"),t.find("#yith-wcbk-create-booking__assign-order").trigger("change"),t.find("#yith-wcbk-create-booking__product-id").trigger("change")}),o(document).on("change","#yith-wcbk-create-booking__product-id",function(){var e=o(this).closest(".yith-wcbk-create-booking__wrapper").find(".yith-wcbk-create-booking__booking-form"),t=o(this).val(),i={product_id:t,action:"yith_wcbk_get_product_booking_form",security:wcbk_admin.nonces.get_booking_form,show_price:!0,bk_context:"create_booking",bk_page:k,additional_data:{bk_context:"create_booking",bk_page:k,bk_page_nonce:wcbk_admin.nonces.panelPageNonce}};t&&(e.block(r),o.ajax({type:"POST",data:i,url:ajaxurl,success:function(t){e.html(t),b&&(n&&e.find(".yith-wcbk-booking-start-date.yith-wcbk-date-picker").val(n),c)&&(t=e.find(".yith-wcbk-booking-start-date-time")).length&&(t.append(o("<option></option>").attr("key",c).html(c)),t.val(c)),o(document.body).trigger("yith-wcbk-init-booking-form"),o(document).trigger("yith-wcbk-init-fields:help-tip"),o(document).trigger("yith-wcbk-init-fields:selector"),o(document).trigger("yith-wcbk-init-fields:select-list")},complete:function(){e.unblock()}}))}),o(document).on("change","#yith-wcbk-create-booking__assign-order",function(){var t=o(this),e=t.closest(".yith-wcbk-create-booking__options").find(".yith-wcbk-create-booking__order-id__row");"specific"===t.val()?e.show():e.hide()})}(jQuery);
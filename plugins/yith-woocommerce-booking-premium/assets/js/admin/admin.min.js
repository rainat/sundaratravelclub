jQuery(function(l){"use strict";var e,i=wp.i18n.__,t={init:function(){l(document).on("click",".yith-wcbk-printer-field__on-off",t.update)},update:function(i){var i=l(i.target).closest(".yith-wcbk-printer-field__on-off"),e=i.find(".yith-wcbk-printer-field__on-off__value").first();"yes"===(e?e.val():"no")?(e.val("no"),i.removeClass("yith-wcbk-printer-field__on-off--enabled")):(e.val("yes"),i.addClass("yith-wcbk-printer-field__on-off--enabled")),e.trigger("change")}},o=(t.init(),{container:".yith-wcbk-time-select__container",hour:".yith-wcbk-time-select-hour",minute:".yith-wcbk-time-select-minute",separator:":",init:function(){var i=o;l(document).on("change",i.hour+", "+i.minute,i.update)},update:function(i){var e=o,i=l(i.target).closest(e.container),t=i.find(e.hour).first(),n=i.find(e.minute).first();i.find("input").first().val(t.val()+e.separator+n.val()).trigger("change")}}),n=(o.init(),l(".yith-wcbk-select2-select-all")),a=l(".yith-wcbk-select2-deselect-all"),c=(a.each(function(){var i=l(this),e=l(this).data("select-id"),t=l("#"+e),e=function(){t.val()&&t.val().length?i.show():i.hide()};t.on("change",e),e()}),n.on("click",function(){var i=l(this),e=l(this).data("select-id"),t=l("#"+e);t.find("option").prop("selected",!0),t.on("change",function(){t.find("option:not(:selected)").length?i.show():i.hide()}),t.trigger("change")}),a.on("click",function(){var i=l(this).data("select-id"),i=l("#"+i);i.find("option").prop("selected",!1),i.trigger("change")}),l("#yith-wcbk-logs").on("click","h2 a.page-title-action",function(i){return i.stopImmediatePropagation(),window.confirm(wcbk_admin.i18n_delete_log_confirmation)}),l(document).on("yith-wcbk-init-tiptip",function(){l("#tiptip_holder").removeAttr("style"),l("#tiptip_arrow").removeAttr("style"),l(".tips").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}).trigger("yith-wcbk-init-tiptip"),l(document).on("yith-wcbk-init-datepickers",function(){l(".yith-wcbk-admin-date-picker").yith_wcbk_datepicker()}).trigger("yith-wcbk-init-datepickers"),!1),d=(l(document).on("click",".yith-wcbk-copy-to-clipboard",function(i){var e,t=l(this),n=t.data("selector-to-copy"),n=l(n);0<n.length&&((c=c&&c.remove()?!1:c)||(c=l('<div id="yith-wcbk-copy-to-clipboard__copied">'+wcbk_admin.i18n_copied+"</div>"),l("body").append(c)),c.hide(),e=l("<input>"),n=n.is("input")?n.val():n.html(),l("body").append(e),e.val(n).select(),document.execCommand("copy"),e.remove(),c.css({left:t.offset().left+t.outerWidth()/2-c.outerWidth()/2,top:t.offset().top-c.outerHeight()-7}).fadeIn().delay(1e3).fadeOut())}),l(".yith-wcbk-show-conditional").hide().each(function(){var i,e=l(this),t=e.data("field-id")||"",n=e.data("value")||"",d=e.data("rules")||[];if(!d.length&&t&&n&&((i={})[t]=n,d=[i]),d.length){var o,a;for(o in d)for(a in d[o])l("#"+a).on("change keyup",function(){!function(){var i,e=!1;for(i in d){var t,n=d[i],o=!0;for(t in n){var a=l("#"+t),c=n[t],a=a.is("input[type=checkbox]")?a.is(":checked")?"yes":"no":a.val();if((c=c.split("|")).indexOf(a)<0){o=!1;break}}if(o){e=!0;break}}return e}()?e.hide():e.show()}).trigger("change")}}),l(".yith-wcbk-move").each(function(){var i=l(this),e=i.data("after");0<e.length&&i.insertAfter(e).show()}),l(".yith-wcbk-date-time-field").each(function(){var i=l(this),e=l(this).data("date"),t=l(this).data("time"),n=l(e).first(),o=l(t).first(),e=function(){i.val(n.val()+" "+o.val())};n.on("change",e),o.on("change",e)}),l(document).on("click","#yith-wcbk-logs-tab-table td.description-column .expand:not(.disabled)",function(i){l(i.target).closest("td.description-column").toggleClass("expanded")}),l(document).on("yith-plugin-fw-float-save-button-after-saving",function(i,e){var t=l("#yith-wcbk-google-calendar-tab__main");t.length&&e&&(e=l(e).find("#yith-wcbk-google-calendar-tab__main")).length&&t.html(e.html())}),l("#yith-wcbk-costs-included-in-shown-price input[type=checkbox]")),r=l("#yith-wcbk-show-duration-unit-in-price"),h=r.closest(".yith-plugin-fw__panel__option, tr.yith-plugin-fw-panel-wc-row"),s=l("#yith-wcbk-replace-days-with-weeks-in-price").closest(".yith-plugin-fw__panel__option, tr.yith-plugin-fw-panel-wc-row"),f=l("#yith-wcbk-show-service-prices"),p=l("#yith-wcbk-show-service-descriptions"),u=l("#yith-wcbk-service-info-layout").closest(".yith-plugin-fw__panel__option, tr.yith-plugin-fw-panel-wc-row"),m=function(){var i=d.filter(":checked").map(function(){return l(this).val()}).get();!i.includes("base-price")||i.includes("extra-costs")||i.includes("services")?(h.hide(),s.hide()):(h.show(),"yes"===r.val()?s.show():s.hide())},n=function(){f.is(":checked")||p.is(":checked")?u.show():u.hide()},w=(d.on("change",function(){d.filter(":checked").length||l(this).prop("checked",!0),m()}),r.on("change",m),f.on("change",n),p.on("change",n),m(),n(),{init:function(){l(document).on("change",".yith-wcbk-day-month__day, .yith-wcbk-day-month__month ",w.update)},update:function(i){var i=l(i.target).closest(".yith-wcbk-day-month"),e=i.find(".yith-wcbk-day-month__value").first(),t=i.find(".yith-wcbk-day-month__day").val(),n=i.find(".yith-wcbk-day-month__month").val(),n=w.formatValue(n,t);i.data("value",n),e.val(n).trigger("change")},formatValue:function(i,e){return(i=i<10?"0"+i:i)+"-"+(e=e<10?"0"+e:e)}});w.init(),l(document).on("yith-wcbk-init-fields:admin-media",function(){l(".yith-wcbk-admin-media:not(.yith-wcbk-admin-media--initialized)").each(function(){var e={};"undefined"!=typeof wp&&"undefined"!=typeof wp.media&&(e.container=l(this),e.dom={field:e.container.find(".yith-wcbk-admin-media__field"),clear:e.container.find(".yith-wcbk-admin-media__clear"),image:e.container.find(".yith-wcbk-admin-media__image"),placeholder:e.container.find(".yith-wcbk-admin-media__placeholder")},e.uploader=wp.media({title:i("Choose image","yith-booking-for-woocommerce"),library:{type:""},button:{text:i("Choose image","yith-booking-for-woocommerce")},multiple:!1}),e.uploader.on("select",function(){var i=e.uploader.state().get("selection").first().toJSON();e.dom.image.attr("src",i.url),e.dom.field.val(i.id),e.container.addClass("yith-wcbk-admin-media--has-image")}),e.openUploader=function(){e.uploader.open()},e.handleClear=function(i){i.stopPropagation(),e.dom.image.attr("src",""),e.dom.field.val(""),e.container.removeClass("yith-wcbk-admin-media--has-image")},e.container.on("click",e.openUploader),e.dom.clear.on("click",e.handleClear))})}).trigger("yith-wcbk-init-fields:admin-media"),"undefined"!=typeof adminpage&&0<=["post-php","post-new-php"].indexOf(adminpage)&&(e={dom:{actions:l("#yith-wcbk-post-type__actions"),save:l("#yith-wcbk-post-type__save"),floatSave:l("#yith-wcbk-post-type__float-save")},init:function(){var i=e;i.dom.save.length&&(i.dom.save.on("click",i.onSaveClick),i.dom.floatSave.on("click",i.onFloatSaveClick),document.addEventListener("scroll",i.handleFloatSaveVisibility,{passive:!0}),l(window).on("resize",i.handleFloatSaveVisibility),i.handleFloatSaveVisibility())},isInViewport:function(i){var i=i.get(0).getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return 0<=i.top&&0<=i.left&&i.top<=t&&i.left<=e},handleFloatSaveVisibility:function(){e.isInViewport(e.dom.save)?e.dom.floatSave.removeClass("visible"):e.dom.floatSave.addClass("visible")},onSaveClick:function(){l(window).off("beforeunload.edit-post"),l(this).block({message:null,overlayCSS:{background:"transparent",opacity:.6}})},onFloatSaveClick:function(){e.dom.save.trigger("click")}}).init(),l(function(){wcbk_admin.disableWcCheckForChanges&&l("input, textarea, select, checkbox").on("change",function(){window.onbeforeunload=""})})});